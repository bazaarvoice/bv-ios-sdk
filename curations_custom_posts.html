<!DOCTYPE html>
<html lang="en">

  <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.2/jquery.min.js"></script>

  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js" integrity="sha384-0mSbJDEHialfmuBBQP6A4Qrprq5OVfW37PRR3j5ELqxss1yVqOtnepnHVP9aJ7xS" crossorigin="anonymous"></script>
  <script type="text/javascript" src="./assets/js/highlight.pack.js"></script>

  <script type="text/javascript" src="./assets/js/jquery_rotate.js"></script>
  <script type="text/javascript" src="./assets/js/main.js"></script>
  <script type="text/javascript" src="./assets/js/popover.js"></script>

  <script>
    
$(function(){

	// select the tab in the sidebar to reflect current page position

	var tabName = "Curations Custom Posts";

	$('.nav-link.active').removeClass('active');
	console.log('active tab: ', tabName);
	var nav_link = $('.nav-link:contains("' + tabName + '")');
	console.log('actual nav link:', nav_link);
	nav_link.addClass('active');
	
});
  </script>

  <script>
    /**
 * Scrolls to the element with the provided class name.
 *
 * @param {String} id - the id of the element we want to scroll to
 */
function scrollToElementById(id) {
  if (!id) {
    throw TypeError(
      'scrollToElementByID(string) - requires a string to be passed in as param'
    );
  }
  const element = document.getElementById(id);
  if (!element) {
    throw Error(`No element found with id "${id}".`);
  }
  scrollToElement(element);
}

/**
 * Scrolls the viewport to the provided element.
 * @param  {DOMNode} element the element to scroll to.
 */
function scrollToElement(element) {
  try {
    element.scrollIntoView();
  } catch (error) {
    console.log(error);
  }
}

/**
 * Clicks on the element with the provided class name.
 * @param {String} id - the id of the element we want to click on.
 */
function triggerClickById(id) {
  if (!id) {
    throw TypeError(
      'triggerClickById(string) - requires a string to be passed in as param'
    );
  }
  const element = document.getElementById(id);
  if (!element) {
    throw Error(`No element found with id "${id}".`);
  }
  triggerClickOnElement(element);
}

/**
 * Clicks on the provided element.
 * @param  {DOMNode} element the element to click on.
 */
function triggerClickOnElement(element) {
  try {
    element.click();
  } catch (error) {
    console.log(error);
  }
}

function scrollAndClickById(id) {
  triggerClickById(id);
  scrollToElementById(id);
}

  </script>


  <script>
  $(document).ready(function(){
      $('[data-toggle="popover"]').popover();
  });

  /* Close all the other popovers */
  $('html').on('mouseup', function(e) {
      if(!$(e.target).closest('.popover').length) {
          $('.popover').each(function(){
              $(this.previousSibling).popover('hide');
          });
      }
  });

  </script>

  <script>hljs.initHighlightingOnLoad();</script>


  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.1/css/font-awesome.min.css">
  <link rel="stylesheet" type="text/css" href="./assets/css/bootstrap.min.css">
  <link rel="stylesheet" type="text/css" href="./assets/css/bvbootstrap.css">
  <link rel="stylesheet" type="text/css" href="./assets/css/highlightjs/default.min.css">
  <link rel="stylesheet" type="text/css" href="./assets/css/main.css">


  <link rel="apple-touch-icon-precomposed" sizes="57x57" href="./public/apple-touch-icon-57x57.png" />
  <link rel="apple-touch-icon-precomposed" sizes="114x114" href="./public/apple-touch-icon-114x114.png" />
  <link rel="apple-touch-icon-precomposed" sizes="72x72" href="./public/apple-touch-icon-72x72.png" />
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="./public/apple-touch-icon-144x144.png" />
  <link rel="apple-touch-icon-precomposed" sizes="60x60" href="./public/apple-touch-icon-60x60.png" />
  <link rel="apple-touch-icon-precomposed" sizes="120x120" href="./public/apple-touch-icon-120x120.png" />
  <link rel="apple-touch-icon-precomposed" sizes="76x76" href="./public/apple-touch-icon-76x76.png" />
  <link rel="apple-touch-icon-precomposed" sizes="152x152" href="./public/apple-touch-icon-152x152.png" />
  <link rel="icon" type="image/png" href="./public/favicon-196x196.png" sizes="196x196" />
  <link rel="icon" type="image/png" href="./public/favicon-96x96.png" sizes="96x96" />
  <link rel="icon" type="image/png" href="./public/favicon-32x32.png" sizes="32x32" />
  <link rel="icon" type="image/png" href="./public/favicon-16x16.png" sizes="16x16" />
  <link rel="icon" type="image/png" href="./public/favicon-128.png" sizes="128x128" />
  <meta name="application-name" content="&nbsp;"/>
  <meta name="msapplication-TileColor" content="#FFFFFF" />
  <meta name="msapplication-TileImage" content="./public/mstile-144x144.png" />
  <meta name="msapplication-square70x70logo" content="./public/mstile-70x70.png" />
  <meta name="msapplication-square150x150logo" content="./public/mstile-150x150.png" />

  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

    ga('create', UA-56370630-4, 'auto');
    ga('set', {
      title: 'Curations Custom Posts'
    });
    ga('send', 'pageview');
  </script>

</head>


  <body>
    <div id="portal_container">
      
      <nav class="navbar-fixed-top">
    <div class="navbar-header">
        <div class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1"
             aria-expanded="false">
            <i class="fa fa-bars fa-3"
               style="color:#fffff5; background-color: #00AB8E; padding:7px; border-radius: 3px;"></i>

            <a href="/" class="bv_logo" style="font-size: 22px;">
                <span class="bv_teal">&nbsp;bazaar</span><span class="bv_white">voice</span><span
                    class="bv_teal">:</span>
            </a>
        </div>

    </div>
    <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
        <ul class="nav side-nav nav-stacked nav-pills">
            <div class="bv_logo">
                <a href="/bv-ios-sdk/index.html">
                    <span class="bv_teal">bazaar</span><span class="bv_white">voice</span><span class="bv_teal">:</span>
                </a>
            </div>
            <li class="nav-item">
                <a class="nav-link active" href="index.html">
                    <span><i class="m-r-1 fa fa-file-text-o"></i>Getting Started</span>
                </a>
                <ul>
                    <li class="nav-item">
                        <a class="nav-link" href="requirements.html">
                            <span>Requirements</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="installation.html">
                            <span>Installation and Configuration</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="example_projects.html">
                            <span>Example Projects</span>
                        </a>
                    </li>
                </ul>
            </li>
            <li class="nav-item">
                <span class="nav-link" href="modules.html">
                    <span><i class="m-r-1 fa fa-cogs"></i>Modules</span>
                </span>
                <ul>


                    <!-- BV Pixel -->
					<li class="nav-item">
                                    <a class="nav-link" href="bvpixel_implementation.html"><span>BV Pixel</span></a>
                                </li>

                     <!-- Conversations -->
                    <li class="nav-item">
                        <a class="nav-link" role="button" data-toggle="collapse" href="#conversationsDropdown"
                           aria-expanded="false" aria-controls="conversationsDropdown">
                                <span><span>Conversations</span><span style="float:right;"><i
                                        id="conversationsDropdownArrow"
                                        class="fa fa-sort-desc fa-rotate-270"></i></span></span>
                        </a>
                        <div class="collapse "
                             id="conversationsDropdown">
                            <ul>
                                <li class="nav-item">
                                    <a class="nav-link" href="content_display.html"><span>Content Display</span></a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" href="content_submission.html"><span>Content Submission</span></a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" href="conversations_authentication.html"><span>Authentication</span></a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" href="conversations_iovation.html"><span>Authenticity with iovation</span></a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" href="conversations_badges.html"><span>Badges</span></a>
                                </li>
                            </ul>
                        </div>

                    </li>

                    <!-- Curations -->
                    <li class="nav-item">
                        <a class="nav-link" role="button" data-toggle="collapse" href="#curationsDropdown"
                           aria-expanded="false" aria-controls="curationsDropdown">
                                <span><span>Curations</span><span style="float:right;">
                                    <i id="curationsDropdownArrow" class="fa fa-sort-desc  fa-rotate-270"></i>
                                </span></span>
                        </a>
                        <div class="collapse in"
                             id="curationsDropdown">
                            <ul>
                                <li class="nav-item">
                                    <a class="nav-link" href="curations_display.html"><span>Curations Display</span></a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" href="curations_custom_posts.html"><span>Curations Custom Posts</span></a>
                                </li>
                            </ul>
                        </div>
                    </li>

                    <!-- Product Recommendations -->
                    <li class="nav-item">
                        <a class="nav-link" href="product_recommendations.html"><span>Product Recommendations (Beta)</span></a>
                    </li>

                    <!-- Ratings Reviews Stores -->
                     <li class="nav-item">
                        <a class="nav-link" role="button" data-toggle="collapse" href="#conversationsStoresDropdown"
                           aria-expanded="false" aria-controls="conversationsStoresDropdown">
                                <span><span>Ratings and Reviews for Stores</span><span style="float:right;"><i
                                        id="conversationsStoresDropdownArrow"
                                        class="fa fa-sort-desc fa-rotate-270"></i></span></span>
                        </a>
                        <div class="collapse "
                             id="conversationsStoresDropdown">
                            <ul>
                                <li class="nav-item">
                                    <a class="nav-link" href="conversations_stores.html"><span>Display and Submit API</span></a>
                                </li>
                            </ul>
                        </div>
                    </li>
                </ul>
            </li>

            <li class="nav-item">
                <a class="nav-link" href="analytics_and_location.html">
                    <span><i class="m-r-1 fa fa-globe"></i>Analytics and Location</span>
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="user_authentication_token.html">
                    <span><i class="m-r-1 fa fa-lock"></i>User Authentication Token</span>
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="networking_delegation.html">
                    <span><i class="m-r-1 fa fa-paper-plane"></i>Networking Delegation</span>
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="ios_9_considerations.html">
                    <span><i class="m-r-1 fa fa-mobile"></i> iOS 9 Considerations</span>
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="faq_support.html">
                    <span><i class="m-r-1 fa fa-question-circle"></i>FAQ and Support</span>
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="./ios-assets/api_reference/index.html">
                    <span><i class="m-r-1 fa fa-book"></i>API Reference</span>
                </a>
            </li>
            <br>
            <li class="nav-item">
                <a class="nav-link"
                   href="mailto:support@bazaarvoice.com?subject=iOS SDK documentation feedback"
                   style="border: 1px #fff solid;">
                    <span><i class="m-r-1 fa fa-envelope"></i>Feedback</span>
                </a>
            </li>
        </ul>
    </div>
</nav>


      <div id="application_container">
        <div id="task_container">
          <div id="task_content" class="app-content">
            <div class="scroll-container scrollable--scrollbar">
              <div class="page-container">

                <div class="flex flex-row" id="content_title">
	Curations Custom Posts
</div>

<p>There are two supported ways in the Bazaarvoice Mobile SDK for implementing Curations photo upload in your iOS apps. You can use our skinnable submission form that handles all the UI display and submission for you, or you can use the submission API directly. Choose whichever suits your application's needs.
<br>
<p><span class="bg-warning well-lg" style="padding:4px;"> <i class="fa fa-hand-o-right"></i>  Important: Before you start implementing this Mobile SDK module, verify your installation by checking the steps on the <a href="./installation.html">Installation and Configuration</a> page.  </span></p>


First, choose the upload API you want to use:
<br><br>
<ol>

  <li><a href="#photouploaderapi">Photo Upload API</a> - If you have your own submission UI, you can easily submit using the <code>BVCurationsPhotoUploader</code> instance to handle the API request for you. </li> 
  <i>...or...</i>
  <li><a href="#photouploaderui">BVCurationsPostViewController - </a> Our <code>BVCurationsPostViewController</code> is a subclass of Apple's <code>SLComponseViewController</code>. When using this method to upload photos, you can give your end-users a familiar native experience using Apple's best practices for sharing content. This component can also be skinned with your company logo and navigation bar color.</li>
<br>
<i>...finally...</i>
<br><br>
  <li><a href="#verifyupload">Verify the Upload</a> After you have a successful submission, check the result in the Curations Console.</li>

<hr/>

</ol>
<a name="photouploaderapi"></a>
<h2>Photo Upload API</h2>
<p>You need to be familiar with only the following two classes to create a Custom Post:</p>
<ul>
	<li><strong>BVCurationsAddPostRequest</strong>&#8212;This class provides default initalizers with the required parameters used to make the request. You can set any of the other properties defined in <code>BVCurationsAddPostRequest.h</code> when posting custom content.
	</li>
	<li><strong>BVCurationsPhotoUploader</strong>&#8212;Uploads the custom post to your Curations group.
	</li>
</ul>
<br>

<h3>Example Code: Curations Submsission API</h3>
<p>The following example uploads a UIImage to your Curations group.</p>


<ul class="nav nav-tabs" role="tablist">
  <li role="presentation" class="active"><a href="#swift" aria-controls="swift" role="tab" data-toggle="tab">Swift</a></li>
  <li role="presentation"><a href="#objc" aria-controls="objc" role="tab" data-toggle="tab">Objective-C</a></li>
</ul>


<!-- Tab panes -->
<div class="tab-content code-switcher">
	<!-- swift -->
	<div role="tabpanel" class="tab-pane active" id="swift">
<pre><code class="swift">// upload this UIImage to Curations with the BVSDK
func uploadImageToCurations(image:UIImage) {
    
    // Required parameters
    let aliasInput = "username"
    let tokenInput = "user_token"
    let textInput = "This is the user comment."
    let groupsInput = ["YOUR-GROUP"]

    let params = BVCurationsAddPostRequest(groups: groupsInput,
        withAuthorAlias: aliasInput,
        withToken: tokenInput,
        withText: textInput,
        withImage: image!)

    // Some optional parameters
    params.tags = ["tag1", "some-other-tag"]
    // alternatively, you can upload a photo(s) via HTTPS instead of a UIImage
    // params.photos = ["https://upload.wikimedia.org/wikipedia/commons/6/6f/Einstein-formal_portrait-35.jpg"]

    // You can also geo-tag photo uploads, which can also in turn be used to 
    // find photos by location and/or create photo maps
    params.latitude = 35.997825
    params.longitude = -113.766150

    let uploadAPI = BVCurationsPhotoUploader()

    uploadAPI .submitCurationsContentWithParams(params, completionHandler: { () -> Void in
        print("Upload success!")
    }) { (error) -> Void in
        print(error.localizedDescription)
    }

}</code></pre>
	</div>
	<!-- objective-c -->
	<div role="tabpanel" class="tab-pane" id="objc">
<pre><code class="objective-c">#include &lt;BVSDK/BVCurations.h&gt;

...

// upload this UIImage to Curations with the BVSDK
- (void)uploadImageToCurations:(UIImage*)image {
    
    // Required params
    NSString *aliasInput = @"username";
    NSString *tokenInput = @"user_token";
    NSString *textInput = @"This is the user comment";
    NSArray *groupsInput = @[@"YOUR-GROUP"];

    BVCurationsAddPostRequest *params = [[BVCurationsAddPostRequest alloc]
                                         initWithGroups:groupsInput
                                         withAuthorAlias:aliasInput
                                         withToken:tokenInput
                                         withText:textInput
                                         withImage:image];

    // Some optional params
    params.tags = @[@"tag1", @"some-other-tag"];
    // alternatively, you can upload a photo(s) via HTTPS instead of a UIImage
    // params.photos = @[@"https://upload.wikimedia.org/wikipedia/commons/6/6f/Einstein-formal_portrait-35.jpg"];

    // You can also geo-tag photo uploads, which can also in turn be used to
    // find photos by location and/or create photo maps
    params.latitude = 35.997825;
    params.longitude = -113.766150;

    BVCurationsPhotoUploader *uploadAPI = [[BVCurationsPhotoUploader alloc] init];

    [uploadAPI submitCurationsContentWithParams:params completionHandler:^(void) {
        // success!
        NSLog(@"Successful Post!");
    } withFailure:^(NSError *error) {
        // error
        NSLog(@"ERROR: %@", error.localizedDescription);
    }];   
}</code></pre>
	</div>

</div>
<br>
<hr/>

<a name="photouploaderui"></a>
<h2>BVCurationsPostViewController</h2>
<br/>
The <code>BVCurationsPostViewController</code> provided by the SDK allows you to customize the following attributes:
<br/><br/>
<ul>
  <li>Navigation bar color</li>
  <li>Navigation bar tint</li>
  <li>Navigation bar icon</li>
  <li>Placeholder text</li>
</ul>
<p/>
Here are a couple of examples to give you an idea of the styling:
<br/><br/>
<img src="ios-img/curations_custom_posts/custom_post1.png" style="float: center; height: 200px; margin-left: 10%;">
<img src="ios-img/curations_custom_posts/custom_post2.png" style="float: center; height: 200px; margin-right: 1%;">

<br><br>

Before you present the <code>BVCurationsPostViewController</code> you should already know the user's alias, token, and have a UIImage to present to the Share Controller. The BVSDK does not provide the code the image picker. Your app is responsible for pushing the Share Controller, displaying any progress, and dismissing the Share Controller when the user cancels the dialog or submits.
<br>
<h3>Example Code: Displaying the BVCurationsPostViewController</h3>
<p>The code below demonstrates how to style and display the Share Controller and respond to end-user events.</p>

<ul class="nav nav-tabs" role="tablist">
  <li role="presentation" class="active"><a href="#swift" aria-controls="swift" role="tab" data-toggle="tab">Swift</a></li>
  <li role="presentation"><a href="#objc" aria-controls="objc" role="tab" data-toggle="tab">Objective-C</a></li>
</ul>


<!-- Tab panes -->
<div class="tab-content code-switcher">
    <!-- swift -->
    <div role="tabpanel" class="tab-pane active" id="swift">
<pre><code class="swift">// Here we load our request with the groups we want to subit to and additional info.
        let shareRequest = BVCurationsAddPostRequest(groups: [],
                                                     withAuthorAlias: "authorAlias",
                                                     withToken: "token",
                                                     withText: "Hello.")
        
        // We've hard-coded an image here for testing, where you would normally have the user select from a gallery or camera.
        shareRequest.image = UIImage(named: "curations_test_image")!
        
        // Now we just post the share view controller with a couple of styling options.
        let shareVC = BVCurationsPostViewController.init(postRequest: shareRequest,
                                                          logoImage: UIImage(named: "happy_icon")!,
                                                          bavBarColor: UIColor.orangeColor(),
                                                          navBarTintColor: UIColor.whiteColor())
        
        shareVC.placeholder = "Say something awesome\nabout your photo!"
        shareVC.modalPresentationStyle = UIModalPresentationStyle.OverCurrentContext;
        
        shareVC.didPressCancel = {
            self.navigationController?.presentingViewController?.dismissViewControllerAnimated(true, completion: nil)
            print("User cancelled")
        }
        
        shareVC.didBeginPost = {
            // Here you could add your own spinner
            print("Beginning Post Submission...")
        }
        
        shareVC.didCompletePost = {(error) in
            // Here you could remove your spinner if added to the view
             self.navigationController?.presentingViewController?.dismissViewControllerAnimated(true, completion: nil)
            if error != nil {
                print("Ooops, the submissions failed: " + (error?.localizedDescription)!)
            } else {
                print("Successful submission!")
            }
        }
        
        self.navigationController?.presentViewController(shareVC, animated: true, completion: { 
            // completion
        })</code></pre>
    </div>
    <!-- objective-c -->
    <div role="tabpanel" class="tab-pane" id="objc">
<pre><code class="objective-c">// Here we load our request with the groups we want to subit to and additional info.
    BVCurationsAddPostRequest *request = [[BVCurationsAddPostRequest alloc]
                                          initWithGroups:@[]
                                          withAuthorAlias:@"authorAlias"
                                          withToken:@"token"
                                          withText:@"Hello"];
    
    // We've hard-coded an image here for testing, where you would normally have the user select from a gallery or camera.
    request.image = [UIImage imageNamed:@"curations_test_image"];
    
    // Now we just post the share view controller with a couple of styling options.
    
    BVCurationsPostViewController *shareVC = [[BVCurationsPostViewController alloc]
                                               initWithPostRequest:request
                                               logoImage:[UIImage imageNamed:@"happy_icon"]
                                               bavBarColor:[UIColor orangeColor]
                                               navBarTintColor:[UIColor whiteColor]];
    
    shareVC.placeholder = @"Say something awesome\nabout your photo!";
    shareVC.modalPresentationStyle = UIModalPresentationOverCurrentContext;
    
    [shareVC setDidPressCancel:^{
        // completion
        [self.navigationController.presentingViewController dismissViewControllerAnimated:true completion:^{
            // completion
            NSLog(@"User tapped cancel.");
        }];
    }];
    
    [shareVC setDidBeginPost:^{
        // Here you could add your own spinner
        NSLog(@"Starting photo upload");
    }];
    
    [shareVC setDidPressCancel:^{
        // completion
        NSLog(@"User tapped cancel.");
        [self.navigationController.presentingViewController dismissViewControllerAnimated:true completion:^{
            // completion
        }];
    }];
    
    [shareVC setDidCompletePost:^(NSError * _Nullable error) {
        // completion
        if (error){
            NSLog(@"ERROR submitting photo: %@", error.localizedDescription);
        } else {
            NSLog(@"Success submitting photo.");
        }
    }];
    
    [self.navigationController presentViewController:shareVC animated:YES completion:^{
        // completion
    }];
</code></pre>
    </div>

</div>


<hr/>
<a name="verifyupload"></a>

<h2>Verify Your Uplaod</h2>
<p>After you successfully create a Custom Post, check your Curations Management Console to verify the content has been uploaded and is ready for moderation, as shown in the screenshot below. Please contact Bazaarvoice if you are unfamiliar with how to log into the Curations Management Console.</p>
<img src="ios-img/curations_custom_posts/curations_successful_custom_post.png" style="height:180px;" class="center-block img-fluid" />
<br>


<div class="well well-sm">
	<h5>Author</h5>
	<p>Copyright 2017 Bazaarvoice, Inc. All rights reserved.</p>
	<h5>License</h5>
	<p>Use of the Bazaarvoice Mobile SDKs is contingent on your agreement and conformance with <a href="http://www.bazaarvoice.com/legal/api-terms-of-use.html">Bazaarvoice's API Terms of Use</a>. Additionally, you agree to store all data acquired by the SDK or Bazaarvoice's API only within the storage of the individual application instance using the SDK or API. You also agree to use the data acquired by the SDK or API only within the context of the same individual application instance and only for purposes consistent with that application's purpose. Except as otherwise noted, the Bazaarvoice Android and iOS SDKs are licensed under the <a href="http://www.apache.org/licenses/LICENSE-2.0.html">Apache License, Version 2.0</a>.</p>
</div>
<br>


              </div>
            </div>
          </div>
        </div>        
      </div>
    </div>
  </body>
