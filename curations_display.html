<!DOCTYPE html>
<html lang="en">

  <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.2/jquery.min.js"></script>

  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js" integrity="sha384-0mSbJDEHialfmuBBQP6A4Qrprq5OVfW37PRR3j5ELqxss1yVqOtnepnHVP9aJ7xS" crossorigin="anonymous"></script>
  <script type="text/javascript" src="./assets/js/highlight.pack.js"></script>

  <script type="text/javascript" src="./assets/js/jquery_rotate.js"></script>
  <script type="text/javascript" src="./assets/js/main.js"></script>
  <script type="text/javascript" src="./assets/js/popover.js"></script>

  <script>
    
$(function(){

	// select the tab in the sidebar to reflect current page position

	var tabName = "Curations Display";

	$('.nav-link.active').removeClass('active');
	console.log('active tab: ', tabName);
	var nav_link = $('.nav-link:contains("' + tabName + '")');
	console.log('actual nav link:', nav_link);
	nav_link.addClass('active');
	
});
  </script>

  <script>
    /**
 * Scrolls to the element with the provided class name.
 *
 * @param {String} id - the id of the element we want to scroll to
 */
function scrollToElementById(id) {
  if (!id) {
    throw TypeError(
      'scrollToElementByID(string) - requires a string to be passed in as param'
    );
  }
  const element = document.getElementById(id);
  if (!element) {
    throw Error(`No element found with id "${id}".`);
  }
  scrollToElement(element);
}

/**
 * Scrolls the viewport to the provided element.
 * @param  {DOMNode} element the element to scroll to.
 */
function scrollToElement(element) {
  try {
    element.scrollIntoView();
  } catch (error) {
    console.log(error);
  }
}

/**
 * Clicks on the element with the provided class name.
 * @param {String} id - the id of the element we want to click on.
 */
function triggerClickById(id) {
  if (!id) {
    throw TypeError(
      'triggerClickById(string) - requires a string to be passed in as param'
    );
  }
  const element = document.getElementById(id);
  if (!element) {
    throw Error(`No element found with id "${id}".`);
  }
  triggerClickOnElement(element);
}

/**
 * Clicks on the provided element.
 * @param  {DOMNode} element the element to click on.
 */
function triggerClickOnElement(element) {
  try {
    element.click();
  } catch (error) {
    console.log(error);
  }
}

function scrollAndClickById(id) {
  triggerClickById(id);
  scrollToElementById(id);
}

  </script>


  <script>
  $(document).ready(function(){
      $('[data-toggle="popover"]').popover();
  });

  /* Close all the other popovers */
  $('html').on('mouseup', function(e) {
      if(!$(e.target).closest('.popover').length) {
          $('.popover').each(function(){
              $(this.previousSibling).popover('hide');
          });
      }
  });

  </script>

  <script>hljs.initHighlightingOnLoad();</script>


  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.1/css/font-awesome.min.css">
  <link rel="stylesheet" type="text/css" href="./assets/css/bootstrap.min.css">
  <link rel="stylesheet" type="text/css" href="./assets/css/bvbootstrap.css">
  <link rel="stylesheet" type="text/css" href="./assets/css/highlightjs/default.min.css">
  <link rel="stylesheet" type="text/css" href="./assets/css/main.css">


  <link rel="apple-touch-icon-precomposed" sizes="57x57" href="./public/apple-touch-icon-57x57.png" />
  <link rel="apple-touch-icon-precomposed" sizes="114x114" href="./public/apple-touch-icon-114x114.png" />
  <link rel="apple-touch-icon-precomposed" sizes="72x72" href="./public/apple-touch-icon-72x72.png" />
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="./public/apple-touch-icon-144x144.png" />
  <link rel="apple-touch-icon-precomposed" sizes="60x60" href="./public/apple-touch-icon-60x60.png" />
  <link rel="apple-touch-icon-precomposed" sizes="120x120" href="./public/apple-touch-icon-120x120.png" />
  <link rel="apple-touch-icon-precomposed" sizes="76x76" href="./public/apple-touch-icon-76x76.png" />
  <link rel="apple-touch-icon-precomposed" sizes="152x152" href="./public/apple-touch-icon-152x152.png" />
  <link rel="icon" type="image/png" href="./public/favicon-196x196.png" sizes="196x196" />
  <link rel="icon" type="image/png" href="./public/favicon-96x96.png" sizes="96x96" />
  <link rel="icon" type="image/png" href="./public/favicon-32x32.png" sizes="32x32" />
  <link rel="icon" type="image/png" href="./public/favicon-16x16.png" sizes="16x16" />
  <link rel="icon" type="image/png" href="./public/favicon-128.png" sizes="128x128" />
  <meta name="application-name" content="&nbsp;"/>
  <meta name="msapplication-TileColor" content="#FFFFFF" />
  <meta name="msapplication-TileImage" content="./public/mstile-144x144.png" />
  <meta name="msapplication-square70x70logo" content="./public/mstile-70x70.png" />
  <meta name="msapplication-square150x150logo" content="./public/mstile-150x150.png" />

  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

    ga('create', UA-56370630-4, 'auto');
    ga('set', {
      title: 'Curations Display'
    });
    ga('send', 'pageview');
  </script>

</head>


  <body>
    <div id="portal_container">
      
      <nav class="navbar-fixed-top">
    <div class="navbar-header">
        <div class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1"
             aria-expanded="false">
            <i class="fa fa-bars fa-3"
               style="color:#fffff5; background-color: #00AB8E; padding:7px; border-radius: 3px;"></i>

            <a href="/" class="bv_logo" style="font-size: 22px;">
                <span class="bv_teal">&nbsp;bazaar</span><span class="bv_white">voice</span><span
                    class="bv_teal">:</span>
            </a>
        </div>

    </div>
    <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
        <ul class="nav side-nav nav-stacked nav-pills">
            <div class="bv_logo">
                <a href="/bv-ios-sdk/index.html">
                    <span class="bv_teal">bazaar</span><span class="bv_white">voice</span><span class="bv_teal">:</span>
                </a>
            </div>
            <li class="nav-item">
                <a class="nav-link active" href="index.html">
                    <span><i class="m-r-1 fa fa-file-text-o"></i>Getting Started</span>
                </a>
                <ul>
                    <li class="nav-item">
                        <a class="nav-link" href="requirements.html">
                            <span>Requirements</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="installation.html">
                            <span>Installation and Configuration</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="example_projects.html">
                            <span>Example Projects</span>
                        </a>
                    </li>
                </ul>
            </li>
            <li class="nav-item">
                <span class="nav-link" href="modules.html">
                    <span><i class="m-r-1 fa fa-cogs"></i>Modules</span>
                </span>
                <ul>


                    <!-- BV Pixel -->
					<li class="nav-item">
                                    <a class="nav-link" href="bvpixel_implementation.html"><span>BV Pixel</span></a>
                                </li>

                     <!-- Conversations -->
                    <li class="nav-item">
                        <a class="nav-link" role="button" data-toggle="collapse" href="#conversationsDropdown"
                           aria-expanded="false" aria-controls="conversationsDropdown">
                                <span><span>Conversations</span><span style="float:right;"><i
                                        id="conversationsDropdownArrow"
                                        class="fa fa-sort-desc fa-rotate-270"></i></span></span>
                        </a>
                        <div class="collapse "
                             id="conversationsDropdown">
                            <ul>
                                <li class="nav-item">
                                    <a class="nav-link" href="content_display.html"><span>Content Display</span></a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" href="content_submission.html"><span>Content Submission</span></a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" href="conversations_authentication.html"><span>Authentication</span></a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" href="conversations_iovation.html"><span>Authenticity with iovation</span></a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" href="conversations_badges.html"><span>Badges</span></a>
                                </li>
                            </ul>
                        </div>

                    </li>

                    <!-- Curations -->
                    <li class="nav-item">
                        <a class="nav-link" role="button" data-toggle="collapse" href="#curationsDropdown"
                           aria-expanded="false" aria-controls="curationsDropdown">
                                <span><span>Curations</span><span style="float:right;">
                                    <i id="curationsDropdownArrow" class="fa fa-sort-desc  fa-rotate-270"></i>
                                </span></span>
                        </a>
                        <div class="collapse in"
                             id="curationsDropdown">
                            <ul>
                                <li class="nav-item">
                                    <a class="nav-link" href="curations_display.html"><span>Curations Display</span></a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" href="curations_custom_posts.html"><span>Curations Custom Posts</span></a>
                                </li>
                            </ul>
                        </div>
                    </li>

                    <!-- Product Recommendations -->
                    <li class="nav-item">
                        <a class="nav-link" href="product_recommendations.html"><span>Product Recommendations (Beta)</span></a>
                    </li>

                    <!-- Advertising -->
                    <li class="nav-item">
                        <a class="nav-link" href="advertising.html"><span>Advertising</span></a>
                    </li>


                    <!-- Ratings Reviews Stores -->
                     <li class="nav-item">
                        <a class="nav-link" role="button" data-toggle="collapse" href="#conversationsStoresDropdown"
                           aria-expanded="false" aria-controls="conversationsStoresDropdown">
                                <span><span>Ratings and Reviews for Stores</span><span style="float:right;"><i
                                        id="conversationsStoresDropdownArrow"
                                        class="fa fa-sort-desc fa-rotate-270"></i></span></span>
                        </a>
                        <div class="collapse "
                             id="conversationsStoresDropdown">
                            <ul>
                                <li class="nav-item">
                                    <a class="nav-link" href="conversations_stores.html"><span>Display and Submit API</span></a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" href="conversations_stores_push.html"><span>Stores Push Notifications</span></a>
                                </li>
                            </ul>
                        </div>
                    </li>
                </ul>
            </li>

            <li class="nav-item">
                <a class="nav-link" href="user_authentication_token.html">
                    <span><i class="m-r-1 fa fa-lock"></i>User Authentication Token</span>
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="ios_9_considerations.html">
                    <span><i class="m-r-1 fa fa-mobile"></i> iOS 9 Considerations</span>
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="faq_support.html">
                    <span><i class="m-r-1 fa fa-question-circle"></i>FAQ and Support</span>
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="./ios-assets/api_reference/index.html">
                    <span><i class="m-r-1 fa fa-book"></i>API Reference</span>
                </a>
            </li>
            <br>
            <li class="nav-item">
                <a class="nav-link"
                   href="mailto:support@bazaarvoice.com?subject=iOS SDK documentation feedback"
                   style="border: 1px #fff solid;">
                    <span><i class="m-r-1 fa fa-envelope"></i>Feedback</span>
                </a>
            </li>
        </ul>
    </div>
</nav>


      <div id="application_container">
        <div id="task_container">
          <div id="task_content" class="app-content">
            <div class="scroll-container scrollable--scrollbar">
              <div class="page-container">

                <div class="flex flex-row" id="content_title">
	Curations Display
</div>

<p><span class="bg-warning well-lg" style="padding:4px;"> <i class="fa fa-hand-o-right"></i>  Important: Before you start implementing this Mobile SDK module, verify your installation by checking the steps on the <a href="./installation.html">Installation and Configuration</a> page.  </span></p>


<p>Curations support from the Bazaarvoice Mobile SDK allows you to rapidly implement your custom social feeds with only a few lines of code. Display social media feeds on your home page or product page with social content tagged to your product catalog.

<br/><br/>
Depending on your application requirements, there are two ways to fetch your Curations data for display:
<br/>

<ul>
  <li><a href="#curationsui">BVCurationsUICollectionView </a>(recommended) - Use our custom, sub-classed UICollectionView controller to handle the entire display, scrolling, and paging.</li>
  <li><a href="#curationsapi">API Direct</a> - If you have UI customization that don't fit a UICollectionView, you can call the API directly to fetch the Curations feed items you need for display.</li>
</ul>


</p>
The completed project for this code walk-through for Swift and Objective-C is in the SDK path <code>/Examples/Curations</code>.  For a more comprehensive demonstration of the Conversations API, please also see the BVSDKDemo project under <code>/Examples/BVSDKDemo</code>.
</p>

<p class="bg-info well-lg" style="padding:4px;"><i class="fa fa-hand-o-right"></i>  You must have Bazaarvoice Curations enabled to use the Curations module. Contact Bazaarvoice to set up Curations and to get your <strong>Curations API Key</strong>.</p>

<hr>
<a name="curationsui"></a>
<h3>BVCurationsUICollectionView</h3>

The BVSDK comes with a ready-to-roll display in <code>BVCurationsUICollectionView</code> class. This subclass of a <code>UICollectionView</code> handles all the flow layout, scrolling, API fetch requests, infinite scroll and adds proper badges for the social channel of each cell. If you are familiar with the fundamentals of a <code>UICollectionView</code>, this integration will be a snap!
<br><br>
Once you have the basic display set-up, you will be required to:
<br>
<ul>
    <li>Implement the <code>BVCurationsUICollectionViewDelegate</code> required methods.</li>
    <ul><li>Provide your own image loading and caching (e.g. SDWebImage).</li></ul>
    <li>Handle any redrawing or layout adjustments for screen rotations</li>
</ul>
<br>
You may optionally, but are encouraged to, handle the following:
<br>
<ul>
    <li>Handle user interaction events for when a user taps a <code>BVCurationFeedItem</code>.</li>
    <li>Handle errors that may occur while loading Curations content</li>
</ul>


Rather than provide a full tutorial of how to use the widget, we have a small code snipped below of the minimal requirements. Please also see a completed example in the GitHub repository for <a href="https://github.com/bazaarvoice/bv-ios-sdk/blob/master/Examples/Curations/Swift/CurationsExample/ViewController.swift#L12">Swift</a> and <a href="https://github.com/bazaarvoice/bv-ios-sdk/blob/master/Examples/Curations/Obj-C/CurationsExample/ViewController.m#L14">Objective-C</a>.

<br><br>
<img src="ios-img/curations_display/curations_carousel.png" style="float: center; width: 400px; margin-left: 10%;">
<img src="ios-img/curations_display/curations_grid.png" style="float: center; height: 400px; margin-right: 1%;">
<br>

<br>
<h5>Code Example: Using the BVCurationsUICollectionView</h5>
<br>
The code demo shows a minimal implementation to display a <code>BVCurationsUICollectionView</code> in a View Controller. The demo uses SDWebImage to perform asynchronous loading and caching of the images displayed in the Collection View Cells.
<br><br>
<ul class="nav nav-tabs" role="tablist">
  <li role="presentation" class="active"><a href="#swift" aria-controls="swift" role="tab" data-toggle="tab">Swift</a></li>
  <li role="presentation"><a href="#objc" aria-controls="objc" role="tab" data-toggle="tab">Objective-C</a></li>
</ul>

<!-- Tab panes -->
<div class="tab-content code-switcher">
    <!-- swift -->
    <div role="tabpanel" class="tab-pane active" id="swift">
<pre><code class="swift">import UIKit
import BVSDK
import SDWebImage

class ViewController: UIViewController, BVCurationsUICollectionViewDelegate {

    @IBOutlet weak var curationsCollectionView: BVCurationsUICollectionView!

    let sdMngr = SDWebImageManager.shared()

    override func viewDidLoad() {
        super.viewDidLoad()

        // Set up the Curations UI display properties
        curationsCollectionView?.curationsDelegate = self
        curationsCollectionView?.groups = ["__all__"]
        // Other optional properties
        curationsCollectionView?.fetchSize = 40
        curationsCollectionView?.infiniteScrollEnabled = true
        curationsCollectionView?.itemsPerRow = 2
        curationsCollectionView?.bvCurationsUILayout = .grid
        // Makes the asynchronous API call to load the Curations feed
        curationsCollectionView?.loadFeed()
    }

    private func loadImage(imageUrl: String, completion:@escaping ((UIImage, String) -> Void)) {

        _ = self.sdMngr.loadImage(with: NSURL(string: imageUrl)! as URL,
                                         options: [],
                                         progress: { (_, _, _) in

            }, completed: { (image, _, _, _, _, url) in
                if let img = image {
                    completion(img, imageUrl)
                }
        })

    }

    // MARK: BVCurationsUICollectionViewDelegate

    func curationsLoadImage(_ imageUrl: String, completion: @escaping BVSDK.BVCurationsLoadImageCompletion) {
        self.loadImage(imageUrl: imageUrl, completion: completion)
    }

    func curationsImageIsCached(_ imageUrl: String, completion: @escaping BVCurationsIsImageCachedCompletion) {

        self.sdMngr.cachedImageExists(for: NSURL(string: imageUrl) as URL?) { (cached) in
            completion(cached, imageUrl)
        }
    }

    func curationsDidSelect(_ feedItem: BVCurationsFeedItem) {
        print("Tapped: " + feedItem.debugDescription)
    }

    func curationsFailed(toLoadFeed error: Error) {
        //Unable to get next batch of content. Handle error.
        print("An error occurred: " + error.debugDescription)
    }

}
</code></pre>
    </div>
    <!-- objective-c -->
    <div role="tabpanel" class="tab-pane" id="objc">
<pre><code class="objective-c">#import "ViewController.h"
#import "ViewController.h"
#import &lt;SDWebImage/SDWebImageManager.h&gt;

@import BVSDK;

@interface ViewController () <BVCurationsUICollectionViewDelegate>

@end

@implementation ViewController

- (void)viewDidLoad {
    [super viewDidLoad];

    // Set up the Curations UI display properties
    self.curationsCollectionView.curationsDelegate = self;
    self.curationsCollectionView.groups = @[@"__all__"];
    // Other optional properties
    self.curationsCollectionView.fetchSize = 40;
    self.curationsCollectionView.infiniteScrollEnabled = YES;
    self.curationsCollectionView.itemsPerRow = 1;
    self.curationsCollectionView.backgroundColor = [UIColor lightGrayColor];
    self.curationsCollectionView.bvCurationsUILayout = BVCurationsUILayoutGrid;
    // Makes the asynchronous API call to load the Curations feed
    [self.curationsCollectionView loadFeed];

}


// MARK: BVCurationsUICollectionViewDelegate


- (void)curationsLoadImage:(NSString *)imageUrl completion:(BVCurationsLoadImageCompletion)completion {

    [[SDWebImageManager sharedManager] loadImageWithURL:[NSURL URLWithString:imageUrl] options:kNilOptions progress:^(NSInteger receivedSize, NSInteger expectedSize, NSURL * _Nullable targetURL) {
        // progress
    } completed:^(UIImage * _Nullable image, NSData * _Nullable data, NSError * _Nullable error, SDImageCacheType cacheType, BOOL finished, NSURL * _Nullable imageURL) {
        completion(image, imageUrl);
    }];

}

- (void)curationsImageIsCached:(NSString *)imageUrl completion:(BVCurationsIsImageCachedCompletion)completion {

    [[SDWebImageManager sharedManager] cachedImageExistsForURL:[NSURL URLWithString:imageUrl] completion:^(BOOL isInCache) {
        completion(isInCache, imageUrl);
    }];

}

- (void)curationsDidSelectFeedItem:(BVCurationsFeedItem *)feedItem {
    // Handle your click logic here...
    NSLog(@"Selected item: %@", feedItem.description);
}

-(void)curationsFailedToLoadFeed:(NSError *)error {
    // Unable to get next batch of content. Handle error
    NSLog(@"An error occurred: %@", error);
}


@end</code></pre>
    </div>

</div>

<br>

<hr>
<a name="curationsapi"></a>
<h3>Curations API Direct</h3>
<br>
Calling the Curations API with the BVSDK requires the use of two class instances and one response object:
<br><br>
<ul>
  <li><b>BVCurationsFeedRequest</b> - Set the required parameters in the default initializer, and optional parameters in the class properties.</li>
  <li><b>BVCurationsFeedLoader</b> - Makes the asynchronous request with success and failure blocks. If there are any network or API failures, they will be in an <code>NSError</code> object.</li>
  <li><b>BVCurationsFeedItem</b> - On a successful result, you will have an array of social feed items you can display in your UI.</li>
</ul>

<br>
<h5>Code Example: Using the Curations Display API</h5>
You can copy/paste the code below for a starter.
<br><br>
<ul class="nav nav-tabs" role="tablist">
  <li role="presentation" class="active"><a href="#swift" aria-controls="swift" role="tab" data-toggle="tab">Swift</a></li>
  <li role="presentation"><a href="#objc" aria-controls="objc" role="tab" data-toggle="tab">Objective-C</a></li>
</ul>

<!-- Tab panes -->
<div class="tab-content code-switcher">
    <!-- swift -->
    <div role="tabpanel" class="tab-pane active" id="swift">
<pre><code class="swift">let feedRequest = BVCurationsFeedRequest(groups: ["__all__"])
// Set any other optional parameter, like geo-coordinates. See the BVCurationsFeedRequest header for fields.
feedRequest?.externalId = "productId"
feedRequest?.withProductData = true

let loader = BVCurationsFeedLoader()
loader.loadFeed(with: feedRequest, completionHandler: { (feedItems) in
    // success
    for item : BVCurationsFeedItem in feedItems! {
        print(item)
    }
    }) { (error) in
    // error
    print(error)
}</code></pre>
    </div>
    <!-- objective-c -->
    <div role="tabpanel" class="tab-pane" id="objc">
<pre><code class="objective-c">BVCurationsFeedRequest *feedRequest = [[BVCurationsFeedRequest alloc] initWithGroups:@[ @"__all__" ]];

// Set any other optional parameter, like geo-coordinates. See the BVCurationsFeedRequest header for fields.
[feedRequest setLatitude:30.2 longitude:-97.7];
[feedRequest setExternalId:@"productId"];
[feedRequest setWithProductData:YES];

BVCurationsFeedLoader *urlRequest = [[BVCurationsFeedLoader alloc] init];

[urlRequest loadFeedWithRequest:feedRequest completionHandler:^(NSArray *feedItems) {
    // success!
    for (BVCurationsFeedItem *item in feedItems){
        NSLog(@"%@", item.debugDescription);
    }
} withFailure:^(NSError *error) {
    // failure : (
    NSLog(@"Error loading feed: %@", error.localizedDescription);
}];</code></pre>
    </div>

</div>


<br>



<div class="well well-sm">
	<h5>Author</h5>
	<p>Copyright 2017 Bazaarvoice, Inc. All rights reserved.</p>
	<h5>License</h5>
	<p>Use of the Bazaarvoice Mobile SDKs is contingent on your agreement and conformance with <a href="http://www.bazaarvoice.com/legal/api-terms-of-use.html">Bazaarvoice's API Terms of Use</a>. Additionally, you agree to store all data acquired by the SDK or Bazaarvoice's API only within the storage of the individual application instance using the SDK or API. You also agree to use the data acquired by the SDK or API only within the context of the same individual application instance and only for purposes consistent with that application's purpose. Except as otherwise noted, the Bazaarvoice Android and iOS SDKs are licensed under the <a href="http://www.apache.org/licenses/LICENSE-2.0.html">Apache License, Version 2.0</a>.</p>
</div>
<br>


              </div>
            </div>
          </div>
        </div>        
      </div>
    </div>
  </body>
