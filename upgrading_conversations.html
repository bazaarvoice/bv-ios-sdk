<!DOCTYPE html>
<html lang="en">

  <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.2/jquery.min.js"></script>
  
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js" integrity="sha384-0mSbJDEHialfmuBBQP6A4Qrprq5OVfW37PRR3j5ELqxss1yVqOtnepnHVP9aJ7xS" crossorigin="anonymous"></script>
  <script type="text/javascript" src="./assets/js/highlight.pack.js"></script>
  
  <script type="text/javascript" src="./assets/js/jquery_rotate.js"></script>
  <script type="text/javascript" src="./assets/js/main.js"></script>
  
  <script>
    
$(function(){

	// select the tab in the sidebar to reflect current page position

	var tabName = "Upgrading Conversations";

	$('.nav-link.active').removeClass('active');
	console.log('active tab: ', tabName);
	var nav_link = $('.nav-link:contains("' + tabName + '")');
	console.log('actual nav link:', nav_link);
	nav_link.addClass('active');
	
});
  </script>

  <script>hljs.initHighlightingOnLoad();</script>


  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.1/css/font-awesome.min.css">
  <link rel="stylesheet" type="text/css" href="./assets/css/bootstrap.min.css">
  <link rel="stylesheet" type="text/css" href="./assets/css/bvbootstrap.css">
  <link rel="stylesheet" type="text/css" href="./assets/css/highlightjs/default.min.css">
  <link rel="stylesheet" type="text/css" href="./assets/css/main.css">

  
  <link rel="apple-touch-icon-precomposed" sizes="57x57" href="./public/apple-touch-icon-57x57.png" />
  <link rel="apple-touch-icon-precomposed" sizes="114x114" href="./public/apple-touch-icon-114x114.png" />
  <link rel="apple-touch-icon-precomposed" sizes="72x72" href="./public/apple-touch-icon-72x72.png" />
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="./public/apple-touch-icon-144x144.png" />
  <link rel="apple-touch-icon-precomposed" sizes="60x60" href="./public/apple-touch-icon-60x60.png" />
  <link rel="apple-touch-icon-precomposed" sizes="120x120" href="./public/apple-touch-icon-120x120.png" />
  <link rel="apple-touch-icon-precomposed" sizes="76x76" href="./public/apple-touch-icon-76x76.png" />
  <link rel="apple-touch-icon-precomposed" sizes="152x152" href="./public/apple-touch-icon-152x152.png" />
  <link rel="icon" type="image/png" href="./public/favicon-196x196.png" sizes="196x196" />
  <link rel="icon" type="image/png" href="./public/favicon-96x96.png" sizes="96x96" />
  <link rel="icon" type="image/png" href="./public/favicon-32x32.png" sizes="32x32" />
  <link rel="icon" type="image/png" href="./public/favicon-16x16.png" sizes="16x16" />
  <link rel="icon" type="image/png" href="./public/favicon-128.png" sizes="128x128" />
  <meta name="application-name" content="&nbsp;"/>
  <meta name="msapplication-TileColor" content="#FFFFFF" />
  <meta name="msapplication-TileImage" content="./public/mstile-144x144.png" />
  <meta name="msapplication-square70x70logo" content="./public/mstile-70x70.png" />
  <meta name="msapplication-square150x150logo" content="./public/mstile-150x150.png" />

  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-56370630-4', 'auto');
    ga('set', {
      title: 'Upgrading Conversations'
    });
    ga('send', 'pageview');
  </script>

</head>


  <body>
    <div id="portal_container">
      
      <nav class="navbar-fixed-top">
    <div class="navbar-header">
        <div class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1"
             aria-expanded="false">
            <i class="fa fa-bars fa-3"
               style="color:#fffff5; background-color: #00AB8E; padding:7px; border-radius: 3px;"></i>

            <a href="/" class="bv_logo" style="font-size: 22px;">
                <span class="bv_teal">&nbsp;bazaar</span><span class="bv_white">voice</span><span
                    class="bv_teal">:</span>
            </a>
        </div>

    </div>
    <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
        <ul class="nav side-nav nav-stacked nav-pills">
            <div class="bv_logo">
                <a href="/">
                    <span class="bv_teal">bazaar</span><span class="bv_white">voice</span><span class="bv_teal">:</span>
                </a>
            </div>
            <li class="nav-item">
                <a class="nav-link active" href="index.html">
                    <span><i class="m-r-1 fa fa-file-text-o"></i>Getting Started</span>
                </a>
                <ul>
                    <li class="nav-item">
                        <a class="nav-link" href="installation.html">
                            <span>Installation and Configuration</span>
                        </a>
                    </li>
                </ul>
            </li>
            <li class="nav-item">
                <span class="nav-link" href="modules.html">
                    <span><i class="m-r-1 fa fa-cogs"></i>Modules</span>
                </span>
                <ul>
                    <li class="nav-item">
                        <a class="nav-link" href="product_recommendations.html"><span>Product Recommendations</span></a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="advertising.html"><span>Advertising</span></a>
                    </li>
                    <li class="nav-item">

                        <a class="nav-link" role="button" data-toggle="collapse" href="#curationsDropdown"
                           aria-expanded="false" aria-controls="curationsDropdown">
                                <span><span>Curations</span><span style="float:right;"><i id="curationsDropdownArrow"
                                                                                          class="fa fa-sort-desc  fa-rotate-270"></i></span></span>
                        </a>
                        <div class="collapse "
                             id="curationsDropdown">
                            <ul>
                                <li class="nav-item">
                                    <a class="nav-link" href="curations_display.html"><span>Curations Display</span></a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" href="curations_custom_posts.html"><span>Curations Custom Posts</span></a>
                                </li>
                            </ul>
                        </div>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" role="button" data-toggle="collapse" href="#conversationsDropdown"
                           aria-expanded="false" aria-controls="conversationsDropdown">
                                <span><span>Conversations</span><span style="float:right;"><i
                                        id="conversationsDropdownArrow"
                                        class="fa fa-sort-desc fa-rotate-270"></i></span></span>
                        </a>
                        <div class="collapse in"
                             id="conversationsDropdown">
                            <ul>
                                <li class="nav-item">
                                    <a class="nav-link" href="content_display.html"><span>Content Display</span></a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" href="content_submission.html"><span>Content Submission</span></a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" href="conversations_iovation.html"><span>Authenticity with iovation</span></a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" href="upgrading_conversations.html"><span>Upgrading Conversations</span></a>
                                </li>
                            </ul>
                        </div>

                    </li>
                </ul>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="bv_pixel.html">
                    <span><i class="m-r-1 fa fa-dot-circle-o"></i>BV Pixel</span>
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="user_authentication_token.html">
                    <span><i class="m-r-1 fa fa-lock"></i>User Authentication Token</span>
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="ios_9_considerations.html">
                    <span><i class="m-r-1 fa fa-mobile"></i> iOS 9 Considerations</span>
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="example_projects.html">
                    <span><i class="m-r-1 fa fa-file-code-o"></i>Example Projects</span>
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="faq_support.html">
                    <span><i class="m-r-1 fa fa-question-circle"></i>FAQ and Support</span>
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="./ios-assets/api_reference/index.html">
                    <span><i class="m-r-1 fa fa-book"></i>API Reference</span>
                </a>
            </li>
            <br>
            <li class="nav-item">
                <a class="nav-link"
                   href="mailto:mobilecoreteam@bazaarvoice.com?subject=iOS SDK documentation feedback"
                   style="border: 1px #fff solid;">
                    <span><i class="m-r-1 fa fa-envelope"></i>Feedback</span>
                </a>
            </li>
        </ul>
    </div>
</nav>

      <div id="application_container">
        <div id="task_container">
          <div id="task_content" class="app-content">
            <div class="scroll-container scrollable--scrollbar">
              <div class="page-container">

                <div class="flex flex-row" id="content_title">
	Upgrading from an old version of BVSDK
</div>

<p>The <strong>Conversations</strong> module has recently been upgraded extensively, making it much easier to display and submit Consumer Generated Content. Upgrading to the latest BVSDK will require a couple changes:</p>

<br>
<h3>Installation</h3>
<p>Installation through Cocoapods is strongly recommended. If the SDK had previously been installed manually, just delete it from your project and follow the <a href="installation.html">installation guides</a>. If previously installed with Cocoapods, simply run <code>pod update</code> from your project's directory to download the latest version. Then:</p>
<ol>
    <li>Modify your import statements:<br><br>

        <ul class="nav nav-tabs" role="tablist">
  <li role="presentation" class="active"><a href="#swift" aria-controls="swift" role="tab" data-toggle="tab">Swift</a></li>
  <li role="presentation"><a href="#objc" aria-controls="objc" role="tab" data-toggle="tab">Objective-C</a></li>
</ul>
        
        <div class="tab-content code-switcher">
            <!-- swift -->
            <div role="tabpanel" class="tab-pane active" id="swift">
<pre><code class="swift">import BVSDK</code></pre>
            </div>
            <!-- objective-c -->
            <div role="tabpanel" class="tab-pane" id="objc">
<pre><code class="objectivec">#import &lt;BVSDK/BVSDK.h&gt;</code></pre>
            </div>
        </div>
        <br>


    </li>
    <li>Modify the SDK initialization inside your <code>AppDelegate</code> file:<br><br>
        <ul class="nav nav-tabs" role="tablist">
  <li role="presentation" class="active"><a href="#swift" aria-controls="swift" role="tab" data-toggle="tab">Swift</a></li>
  <li role="presentation"><a href="#objc" aria-controls="objc" role="tab" data-toggle="tab">Objective-C</a></li>
</ul>
        
        <div class="tab-content code-switcher">
            <!-- swift -->
            <div role="tabpanel" class="tab-pane active" id="swift">
<pre><code class="swift">BVSDKManager.sharedManager().staging = true  // set to false for production!
BVSDKManager.sharedManager().clientId = "YOUR_CLIENT_ID"
BVSDKManager.sharedManager().apiKeyConversations = "YOUR_CONVERSATIONS_API_KEY"</code></pre>
            </div>
            <!-- objective-c -->
            <div role="tabpanel" class="tab-pane" id="objc">
<pre><code class="objectivec">[BVSDKManager sharedManager].staging = YES; // set to NO for production!
[BVSDKManager sharedManager].clientId = @"YOUR_CLIENT_ID";
[BVSDKManager sharedManager].apiKeyConversations = @"YOUR_CONVERSATIONS_API_KEY";</code></pre>
            </div>
        </div>


    </li>
</ol>




<br>
<h3>Content display</h3>
<p>Previously, all content display was powered using a <code>BVGet</code> object. This has been deprecated in favor of these 4 request objects:</p>
<ul>
	<li><code>BVProductDisplayPageRequest</code></li>
	<li><code>BVReviewsRequest</code></li>
	<li><code>BVQuestionAndAnswersRequest</code></li>
	<li><code>BVBulkRatingsRequest</code></li>
</ul>
<p>Using the above requestobjects make loading data easier by using success and failure blocks. As well, the display results contain easy to use model object such as, <code>BVReview</code>, <code>BVQuestion</code>, <code>BVAnswer</code> and <code>BVProduct</code>.</p>
<hr>

<h3>Content display - old pattern</h3>

<p>For example, loading reviews previously looked like this:</p>
<ul class="nav nav-tabs" role="tablist">
  <li role="presentation" class="active"><a href="#swift" aria-controls="swift" role="tab" data-toggle="tab">Swift</a></li>
  <li role="presentation"><a href="#objc" aria-controls="objc" role="tab" data-toggle="tab">Objective-C</a></li>
</ul>
<!-- Tab panes -->
<div class="tab-content code-switcher">
	<!-- swift -->
	<div role="tabpanel" class="tab-pane active" id="swift">
<pre><code class="swift">import BVSDK
class ViewController: UIViewController, BVDelegate {

    override func viewDidLoad(){
        super.viewDidLoad()

        let request = BVGet(type: BVGetTypeReviews)
        request.sendRequestWithDelegate(self)
    }

    func didReceiveResponse(response: [NSObject : AnyObject]!, forRequest request: AnyObject!) {
        print("Raw, hard to use response: ", response)
    }

    func didFailToReceiveResponse(err: NSError!, forRequest request: AnyObject!) {
        // failure
    }

    func didSendBodyData(bytesSent: Int64, totalBytesSent: Int64, totalBytesExpectedToSend: Int64, forRequest request: AnyObject!) {
        // huh?
    }

}</code></pre>
	</div>
	<!-- objective-c -->
	<div role="tabpanel" class="tab-pane" id="objc">
<pre><code class="objectivec">#import &lt;BVSDK/BVConversations.h&gt;
@interface ViewController : UIViewController &lt;BVDelegate&gt; {

- (void)viewDidLoad {
    [super viewDidLoad];
    BVGet *request = [[BVGet alloc] initWithType:BVGetTypeReviews];
    [request sendRequestWithDelegate:self];
}

- (void) didReceiveResponse:(NSDictionary *)response forRequest:(id)request {
    // Handle response, and parse lots and lots of JSON
}

- (void) didFailToReceiveResponse:(NSError*)err forRequest:(id)request {
    // Handle error
}

}
</code></pre>
	</div>
</div>
<br>

<h3>Content display - new pattern!</h3>

<p>As you can see from the above examples, that's a lot of code. Loading reviews now has a greatly simplified usage pattern and all the model objects are parsed for you. For example, a request of reviews for a single product now looks like:</p>
<ul class="nav nav-tabs" role="tablist">
  <li role="presentation" class="active"><a href="#swift" aria-controls="swift" role="tab" data-toggle="tab">Swift</a></li>
  <li role="presentation"><a href="#objc" aria-controls="objc" role="tab" data-toggle="tab">Objective-C</a></li>
</ul>
<!-- Tab panes -->
<div class="tab-content code-switcher">
    <!-- swift -->
    <div role="tabpanel" class="tab-pane active" id="swift">
<pre><code class="swift">let reviews = BVReviewsRequest(productId: "test1", limit: 20, offset: 0)
request.load({ (response: BVReviewsResponse) in
            
    let reviews = response.results
    
}) { (errors: [NSError]) in
    // handle failure appropriately
}</code></pre>
</div>
<!-- objective-c -->
<div role="tabpanel" class="tab-pane" id="objc">
<pre><code class="objectivec">[request load:^(BVReviewsResponse * _Nonnull response) {
        
    NSArray&lt;BVReview*&gt;* reviews = response.results;
    
} failure:^(NSArray&lt;NSError *&gt; * _Nonnull errors) {
    // handle failure appropriately
}];</code></pre>
    </div>
</div>
<br>

<p>The patern for Reviews applies similarly for <strong>Products</strong>, <strong>Questions & Answers</strong>, and <strong>Bulk Ratings</strong>.</p>

<br>
<h3>Content submission</h3>
<p>Content submission has changed in the same way that content display has. Previously, a <code>BVPost</code> object would handle submitting every type of content. Now, use the more specific:</p>
<ul>
    <li><code>BVReviewSubmission</code></li>
    <li><code>BVQuestionSubmission</code></li>
    <li><code>BVAnswerSubmission</code></li>
</ul>
<p>to submit Consumer Generated Content to the Bazaarvoice platform.</p>

<hr/>

<h4>Content submission - old pattern</h4>

<p>For example, submitting a review previously looked like:</p>
<ul class="nav nav-tabs" role="tablist">
  <li role="presentation" class="active"><a href="#swift" aria-controls="swift" role="tab" data-toggle="tab">Swift</a></li>
  <li role="presentation"><a href="#objc" aria-controls="objc" role="tab" data-toggle="tab">Objective-C</a></li>
</ul>
<!-- Tab panes -->
<div class="tab-content code-switcher">
    <!-- swift -->
    <div role="tabpanel" class="tab-pane active" id="swift">
<pre><code class="swift">import BVSDK
class ViewController: UIViewController, BVDelegate {

    override func viewDidLoad(){
        super.viewDidLoad()

        BVPost *request = [[BVPost alloc] initWithType:BVPostTypeReview];
        request.productId = @"test1";
        request.rating = 4;
        request.title = @"Review title goes here";
        request.reviewText = @"Review text goes here";
        ...
        
        [request sendRequestWithDelegate:self];
    }

    func didReceiveResponse(response: [NSObject : AnyObject]!, forRequest request: AnyObject!) {
        print("Again, hard to use raw response: ", response)
    }

    func didFailToReceiveResponse(err: NSError!, forRequest request: AnyObject!) {
        // failure
    }

    func didSendBodyData(bytesSent: Int64, totalBytesSent: Int64, totalBytesExpectedToSend: Int64, forRequest request: AnyObject!) {
        // but why?
    }

}</code></pre>
</div>
<!-- objective-c -->
<div role="tabpanel" class="tab-pane" id="objc">
<pre><code class="objectivec">#import &lt;BVSDK/BVConversations.h&gt;
@interface ViewController : UIViewController &lt;BVDelegate&gt; {

- (void)viewDidLoad {
    [super viewDidLoad];
    BVPost *request = [[BVPost alloc] initWithType:BVPostTypeReview];
    request.productId = @"100003401";
    request.userId = [NSString stringWithFormat:@"123abcd%i", arc4random()];
    request.rating = 5;
    request.title = @"Test title";
    request.reviewText = @"Some kind of review text.";
    request.userNickname = @"testnickname";
    [request addVideoUrl:@"https://www.youtube.com" withCaption:nil];
    
    [request sendRequestWithDelegate:self];
}

- (void) didReceiveResponse:(NSDictionary *)response forRequest:(id)request {
    // Handle response, and parse lots and lots of JSON
}

- (void) didFailToReceiveResponse:(NSError*)err forRequest:(id)request {
    // Handle error
}

}

</code></pre>
    </div>
</div>
<br>

<h4>Content submission - new pattern!</h4>

<p>Doing that same review submission now looks like:</p>
<ul class="nav nav-tabs" role="tablist">
  <li role="presentation" class="active"><a href="#swift" aria-controls="swift" role="tab" data-toggle="tab">Swift</a></li>
  <li role="presentation"><a href="#objc" aria-controls="objc" role="tab" data-toggle="tab">Objective-C</a></li>
</ul>
<!-- Tab panes -->
<div class="tab-content code-switcher">
    <!-- swift -->
    <div role="tabpanel" class="tab-pane active" id="swift">
<pre><code class="swift">let review = BVReviewSubmission(reviewTitle: "Review title goes here",
                                 reviewText: "Review text goes here",
                                     rating: 4,
                                  productId: "test1")

// submit the review
review.submit({ (reviewSubmission: BVReviewSubmissionResponse) in
    // review submitted successfully! 🎉
}, failure: { (errors: [NSError]) in
    // handle failure appropriately
})</code></pre>
</div>
<!-- objective-c -->
<div role="tabpanel" class="tab-pane" id="objc">
<pre><code class="objectivec">BVReviewSubmission* review = [[BVReviewSubmission alloc] initWithReviewTitle:@"Review title goes here"
                                                                  reviewText:@"Review text goes here"
                                                                      rating:4
                                                                   productId:@"test1"];

// user added a photo to this review
[review addPhoto:userPhoto withPhotoCaption:userPhotoCaption];

// submit the review
[review submit:^(BVReviewSubmissionResponse * _Nonnull response) {
    // review submitted successfully! 🎉
} failure:^(NSArray&lt;NSError *&gt; * _Nonnull errors) {
    // handle failure appropriately
}];</code></pre>
    </div>
</div>
<br>

<p>The design pattern again are similar for submitting <strong>Questions</strong> and <strong>Answers</strong>.</p>
<br><br>


<div class="well well-sm">
	<h5>Author</h5>
	<p>Copyright 2016 Bazaarvoice, Inc. All rights reserved.</p>
	<h5>License</h5>
	<p>Use of the Bazaarvoice Mobile SDKs is contingent on your agreement and conformance with <a href="http://www.bazaarvoice.com/legal/api-terms-of-use.html">Bazaarvoice's API Terms of Use</a>. Additionally, you agree to store all data acquired by the SDK or Bazaarvoice's API only within the storage of the individual application instance using the SDK or API. You also agree to use the data acquired by the SDK or API only within the context of the same individual application instance and only for purposes consistent with that application's purpose. Except as otherwise noted, the Bazaarvoice iOS SDK is licensed under the <a href="http://www.apache.org/licenses/LICENSE-2.0.html">Apache License, Version 2.0</a>.</p>
</div>
<br>


              </div>
            </div>
          </div>
        </div>        
      </div>
    </div>
  </body>
