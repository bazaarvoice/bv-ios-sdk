//
//  ConversationsTests.swift
//  ConversationsTests
//
//  Copyright Â© 2016 Bazaarvoice. All rights reserved.
//

import XCTest
@testable import BVSDK

class ConversationsTests: XCTestCase {
    
    override func setUp() {
        super.setUp()
        
        let configDict = ["clientId": "apitestcustomer",
                          "apiKeyConversations": "testApiKey"];
        BVSDKManager.configure(withConfiguration: configDict, configType: .staging)
    }
    
    override func tearDown() {
        super.tearDown()
    }
    
    func testDiagnosticParams() {
        // check that the request sent includes diagnostic information about the app and sdk
        let params = BVReviewsRequest(productId: "test1", limit: 10, offset: 0).createParams()
        
        XCTAssertEqual(getParamValue(params, keyToSearchFor: "passkey"), "testApiKey")
        XCTAssertEqual(getParamValue(params, keyToSearchFor: "apiversion"), "5.4")
        XCTAssertEqual(getParamValue(params, keyToSearchFor: "_bvIosSdkVersion"), BV_SDK_VERSION)
        
    }
    
    func testExample() {
        
        let response = BVReviewsResponse(apiResponse: requestAllReviewsForParticularProduct.json!)
        
        XCTAssertEqual(response.results.count, 1)
        XCTAssertEqual(response.totalResults, 19)
        XCTAssertEqual(response.locale, "en_US")
        XCTAssertEqual(response.offset, 0)
        
        XCTAssertNotNil(response.results.first)
        
    }
    
    func testRequestReviewWithInclude() {
        
        let response = BVReviewsResponse(apiResponse: requestReviewIncludeProduct.json!)
        
        XCTAssertEqual(response.results.count, 1)
        XCTAssertEqual(response.totalResults, 151)
        XCTAssertEqual(response.locale, "en_US")
        XCTAssertEqual(response.offset, 0)
        
        let review = response.results.first!
        
        // check that the included product was attached to the review
        XCTAssertNotNil(review.product)
        
        // check that the product was parsed correctly
        XCTAssertNotNil(review.product?.description)
        XCTAssertEqual(review.product?.brandExternalId, "otttwtzo9imo28ssfm58x1hm")
        XCTAssertEqual(review.product?.productPageUrl, "http://myshco.com/appliances/dryers/profile.php")
        XCTAssertEqual(review.product?.imageUrl, "http://myshco.com/productImages/profile.png")
        XCTAssertEqual(review.product?.name, "Profile 7.5 Cu. Ft. Colossal Capacity Electric Dryer")
        XCTAssertEqual(review.product?.categoryId, "1011")
        XCTAssertEqual(review.product?.identifier, "1000001")
        
    }
    
    func testRequestReviewIncludeProductsCategoriesAuthors() {
        
        let response = BVReviewsResponse(apiResponse: requestReviewIncludeProductsCategoriesAuthors.json!)
        
        XCTAssertEqual(response.results.count, 1)
        XCTAssertEqual(response.totalResults, 1)
        XCTAssertEqual(response.locale, "en_US")
        XCTAssertEqual(response.offset, 0)
        
        let review = response.results.first!
        
        // product
        XCTAssertNotNil(review.product)
        XCTAssertNotNil(review.product?.productDescription)
        XCTAssertEqual(review.product?.brandExternalId, "otttwtzo9imo28ssfm58x1hm")
        XCTAssertEqual(review.product?.productPageUrl, "http://myshco.com/appliances/dryers/profile.php")
        XCTAssertEqual(review.product?.imageUrl, "http://myshco.com/productImages/profile.png")
        XCTAssertEqual(review.product?.name, "Profile 7.5 Cu. Ft. Colossal Capacity Electric Dryer")
        XCTAssertEqual(review.product?.categoryId, "1011")
        XCTAssertEqual(review.product?.identifier, "1000001")
    }
    
    func testRequestReviewsWithReviewStats() {
        
        let response = BVReviewsResponse(apiResponse: requestReviewsWithReviewStats.json!)
        
        XCTAssertEqual(response.results.count, 1)
        XCTAssertEqual(response.locale, "en_US")
        XCTAssertEqual(response.offset, 0)
        
        XCTAssertNotNil(response.results.first)
        
    }
    
    
    
    func testDisplayQuestionById() {
        
        let response = BVQuestionsAndAnswersResponse(apiResponse: requestQuestionById.json!)
        
        XCTAssertEqual(response.results.count, 1)
        XCTAssertEqual(response.locale, "en_US")
        XCTAssertEqual(response.offset, 0)
        
        XCTAssertNotNil(response.results.first)
        
    }
    
    func testDisplayProducts() {
        
        let response = BVProductsResponse(apiResponse: requestProducts.json!)
        
        XCTAssertNotNil(response.result)
        XCTAssertEqual(response.totalResults, 1)
        XCTAssertEqual(response.locale, "en_US")
        XCTAssertEqual(response.offset, 0)
        
    }
    
    func testRequestProductsWithStatsOnReviewsAndQA() {
        
        
        let response = BVProductsResponse(apiResponse: requestProductsWithStatsOnReviewsAndQA.json!)
        
        XCTAssertNotNil(response.result)
        XCTAssertEqual(response.totalResults, 1)
        XCTAssertEqual(response.locale, "en_US")
        XCTAssertEqual(response.offset, 0)
        
    }
    
    func testRequestProductsWithZeroStarRatingDistribution() {
        //requestProductsWithStatsOnReviewsAndQA.json includes zero starRating statistic in reviewDistribution
        let response = BVProductsResponse(apiResponse: requestProductsWithStatsOnReviewsAndQA.json!)
        
        XCTAssertNotNil(response.result)
        XCTAssertEqual(response.result?.reviewStatistics?.ratingDistribution?.oneStarCount, 22)
        XCTAssertEqual(response.result?.reviewStatistics?.ratingDistribution?.twoStarCount, 21)
        XCTAssertEqual(response.result?.reviewStatistics?.ratingDistribution?.threeStarCount, 24)
        XCTAssertEqual(response.result?.reviewStatistics?.ratingDistribution?.fourStarCount, 70)
        XCTAssertEqual(response.result?.reviewStatistics?.ratingDistribution?.fiveStarCount, 139)
        //Total number of objects in rawDistribution should be six due to zeroStar field being included
        XCTAssertEqual(response.result?.reviewStatistics?.ratingDistribution?.rawDistribution.count, 6)


    }

    

    
    let requestAllReviewsForParticularProduct = "{\"Includes\":{},\"HasErrors\":false,\"Offset\":0,\"TotalResults\":19,\"Locale\":\"en_US\",\"Errors\":[],\"Results\":[{\"TagDimensions\":{\"Pro\":{\"Values\":[\"Example of wordy Pro value\",\"Pro 2\",\"Pro 1\",\"hjghj\",\"cghjc\",\"ghjcghjc\",\"ghjc\",\"ghjcgh\",\"jcghj\",\"yjhcgyjh\",\"cgyjh\"],\"Label\":\"Pros\",\"Id\":\"Pro\"},\"Con\":{\"Values\":[\"Example of wordy Con value\",\"Con 1\",\"Con 2\",\"yhjcyhj\",\"cyhjc\",\"gyjhcg\",\"yhcfgy\",\"jcfygjf\",\"xgjfcgy\",\"cjhgf\",\"yjhcg\",\"yjhcgyjhc\",\"gyjh\"],\"Label\":\"Cons\",\"Id\":\"Con\"}},\"TagDimensionsOrder\":[\"Pro\",\"Con\"],\"AdditionalFieldsOrder\":[],\"Cons\":null,\"IsRecommended\":false,\"IsRatingsOnly\":false,\"UserNickname\":\"fyjhtgyjhtgjh\",\"Pros\":null,\"Photos\":[{\"Caption\":\"TEST>> I came in the store wanting to try 4 other dresses, and didnt even notice this one. I walked by a huge poster, and this beautiful dress caught my eye! It ended up being the first dress I tried on, and it was right then, that I knew this was the rig\",\"Sizes\":{\"thumbnail\":{\"Url\":\"http://apireadonly.ugc.bazaarvoice.com/bvstaging/5556/80318/photoThumb.jpg\",\"Id\":\"thumbnail\"},\"normal\":{\"Url\":\"http://apireadonly.ugc.bazaarvoice.com/bvstaging/5556/80318/photo.jpg\",\"Id\":\"normal\"}},\"SizesOrder\":[\"thumbnail\",\"normal\"],\"Id\":\"80318\"},{\"Caption\":\"TEST>> I came in the store wanting to try 4 other dresses, and didnt even notice this one. I walked by a huge poster, and this beautiful dress caught my eye! It ended up being the first dress I tried on, and it was right then, that I knew this was the rig\",\"Sizes\":{\"thumbnail\":{\"Url\":\"http://apireadonly.ugc.bazaarvoice.com/bvstaging/5556/80319/photoThumb.jpg\",\"Id\":\"thumbnail\"},\"normal\":{\"Url\":\"http://apireadonly.ugc.bazaarvoice.com/bvstaging/5556/80319/photo.jpg\",\"Id\":\"normal\"}},\"SizesOrder\":[\"thumbnail\",\"normal\"],\"Id\":\"80319\"},{\"Caption\":\"TEST>> I came in the store wanting to try 4 other dresses, and didnt even notice this one. I walked by a huge poster, and this beautiful dress caught my eye! It ended up being the first dress I tried on, and it was right then, that I knew this was the rig\",\"Sizes\":{\"thumbnail\":{\"Url\":\"http://apireadonly.ugc.bazaarvoice.com/bvstaging/5556/80320/photoThumb.jpg\",\"Id\":\"thumbnail\"},\"normal\":{\"Url\":\"http://apireadonly.ugc.bazaarvoice.com/bvstaging/5556/80320/photo.jpg\",\"Id\":\"normal\"}},\"SizesOrder\":[\"thumbnail\",\"normal\"],\"Id\":\"80320\"},{\"Caption\":\"TEST>> I came in the store wanting to try 4 other dresses, and didnt even notice this one. I walked by a huge poster, and this beautiful dress caught my eye! It ended up being the first dress I tried on, and it was right then, that I knew this was the rig\",\"Sizes\":{\"thumbnail\":{\"Url\":\"http://apireadonly.ugc.bazaarvoice.com/bvstaging/5556/80321/photoThumb.jpg\",\"Id\":\"thumbnail\"},\"normal\":{\"Url\":\"http://apireadonly.ugc.bazaarvoice.com/bvstaging/5556/80321/photo.jpg\",\"Id\":\"normal\"}},\"SizesOrder\":[\"thumbnail\",\"normal\"],\"Id\":\"80321\"},{\"Caption\":\"TEST>> I came in the store wanting to try 4 other dresses, and didnt even notice this one. I walked by a huge poster, and this beautiful dress caught my eye! It ended up being the first dress I tried on, and it was right then, that I knew this was the rig\",\"Sizes\":{\"thumbnail\":{\"Url\":\"http://apireadonly.ugc.bazaarvoice.com/bvstaging/5556/80322/photoThumb.jpg\",\"Id\":\"thumbnail\"},\"normal\":{\"Url\":\"http://apireadonly.ugc.bazaarvoice.com/bvstaging/5556/80322/photo.jpg\",\"Id\":\"normal\"}},\"SizesOrder\":[\"thumbnail\",\"normal\"],\"Id\":\"80322\"},{\"Caption\":\"TEST>> I came in the store wanting to try 4 other dresses, and didnt even notice this one. I walked by a huge poster, and this beautiful dress caught my eye! It ended up being the first dress I tried on, and it was right then, that I knew this was the rig\",\"Sizes\":{\"thumbnail\":{\"Url\":\"http://apireadonly.ugc.bazaarvoice.com/bvstaging/5556/80323/photoThumb.jpg\",\"Id\":\"thumbnail\"},\"normal\":{\"Url\":\"http://apireadonly.ugc.bazaarvoice.com/bvstaging/5556/80323/photo.jpg\",\"Id\":\"normal\"}},\"SizesOrder\":[\"thumbnail\",\"normal\"],\"Id\":\"80323\"}],\"ContextDataValues\":{},\"Videos\":[{\"VideoHost\":\"www.youtube.com\",\"Caption\":\"TEST>> I came in the store wanting to try 4 other dresses, and didnt even notice this one. I walked by a huge poster, and this beautiful dress caught my eye! It ended up being the first dress I tried on, and it was right then, that I knew this was the rig\",\"VideoThumbnailUrl\":\"http://img.youtube.com/vi/hWCQrbWUxsU/0.jpg\",\"VideoId\":\"hWCQrbWUxsU\",\"VideoUrl\":\"http://www.youtube.com/v/hWCQrbWUxsU&rel=0\",\"VideoIframeUrl\":null}],\"ContextDataValuesOrder\":[],\"SubmissionId\":null,\"LastModificationTime\":\"2011-06-30T21:17:48.000+00:00\",\"TotalFeedbackCount\":0,\"TotalPositiveFeedbackCount\":0,\"BadgesOrder\":[],\"UserLocation\":\"TEST>> I came in the store wanting to try 4 other\",\"Badges\":{},\"AuthorId\":\"i1zfp30snow\",\"SecondaryRatingsOrder\":[],\"IsFeatured\":false,\"IsSyndicated\":false,\"ProductRecommendationIds\":[],\"Title\":\"TEST>> I came in the store wanting to try 4 other dresses, and didnt even notice this one. I walked by a huge poster, and this beautiful dress caught\",\"ProductId\":\"1000001\",\"AdditionalFields\":{},\"CampaignId\":null,\"Helpfulness\":null,\"TotalNegativeFeedbackCount\":0,\"SubmissionTime\":\"2011-04-05T13:40:37.000+00:00\",\"Rating\":5,\"IPAddress\":null,\"ContentLocale\":\"en_US\",\"RatingRange\":5,\"TotalCommentCount\":1,\"ReviewText\":\"TEST>> I came in the store wanting to try 4 other dresses, and didnt even notice this one. I walked by a huge poster, and this beautiful dress caught my eye! It ended up being the first dress I tried on, and it was right then, that I knew this was the right dress. After this dress, I tried on 4 other ones, but decided on buying this one. It fits sooooo perfectly, and it gives your body a wonderful shape.testI love this dress sooooooo much!!\",\"ModerationStatus\":\"APPROVED\",\"ClientResponses\":[],\"Id\":\"192559\",\"SecondaryRatings\":{},\"CommentIds\":[],\"LastModeratedTime\":\"2011-06-30T21:17:48.000+00:00\"}],\"Limit\":1}"
    
    let requestReviewIncludeProduct = "{\"HasErrors\":false,\"Includes\":{\"Products\":{\"1000001\":{\"Brand\":{\"Name\":\"GE\",\"Id\":\"otttwtzo9imo28ssfm58x1hm\"},\"ISBNs\":[],\"UPCs\":[],\"Description\":\"This extra-large capacity dryer lets you choose between 8 dry cycles, so you can use the proper settings for your clothes. The auto dry function uses thermostats to tell when your laundry is dry, reducing wear and tear.\",\"ManufacturerPartNumbers\":[],\"Attributes\":{},\"QuestionIds\":[],\"BrandExternalId\":\"otttwtzo9imo28ssfm58x1hm\",\"ProductPageUrl\":\"http://myshco.com/appliances/dryers/profile.php\",\"FamilyIds\":[],\"AttributesOrder\":[],\"ImageUrl\":\"http://myshco.com/productImages/profile.png\",\"EANs\":[],\"Name\":\"Profile 7.5 Cu. Ft. Colossal Capacity Electric Dryer\",\"CategoryId\":\"1011\",\"ReviewIds\":[],\"Id\":\"1000001\",\"StoryIds\":[],\"ModelNumbers\":[]}},\"ProductsOrder\":[\"1000001\"]},\"Offset\":0,\"TotalResults\":151,\"Locale\":\"en_US\",\"Errors\":[],\"Results\":[{\"TagDimensions\":{},\"TagDimensionsOrder\":[],\"AdditionalFieldsOrder\":[],\"Cons\":null,\"IsRecommended\":null,\"IsRatingsOnly\":false,\"UserNickname\":\"Test12345\",\"Pros\":null,\"Photos\":[],\"ContextDataValues\":{},\"Videos\":[],\"ContextDataValuesOrder\":[],\"SubmissionId\":null,\"LastModificationTime\":\"2016-05-27T18:15:24.000+00:00\",\"TotalFeedbackCount\":16,\"TotalPositiveFeedbackCount\":13,\"UserLocation\":null,\"BadgesOrder\":[\"Staff\"],\"Badges\":{\"Staff\":{\"BadgeType\":\"Affiliation\",\"Id\":\"Staff\",\"ContentType\":\"REVIEW\"}},\"AuthorId\":\"TEST_AUTHOR\",\"IsFeatured\":false,\"SecondaryRatingsOrder\":[\"Value\",\"Quality\"],\"IsSyndicated\":false,\"ProductRecommendationIds\":[],\"Title\":\"This is a test review.\",\"ProductId\":\"1000001\",\"AdditionalFields\":{},\"CampaignId\":null,\"Helpfulness\":0.638889,\"TotalNegativeFeedbackCount\":3,\"SubmissionTime\":\"2011-06-22T12:41:21.000+00:00\",\"Rating\":3,\"IPAddress\":null,\"ContentLocale\":\"en_US\",\"RatingRange\":5,\"TotalCommentCount\":0,\"ReviewText\":\"This is a test review. This is a test review. This is a test review. This is a test review. This is a test review. This is a test review. This is a test review.\",\"ModerationStatus\":\"APPROVED\",\"ClientResponses\":[],\"Id\":\"192612\",\"CommentIds\":[],\"SecondaryRatings\":{\"Value\":{\"Value\":4,\"ValueLabel\":null,\"MaxLabel\":null,\"Label\":\"Value\",\"Id\":\"Value\",\"ValueRange\":5,\"MinLabel\":null,\"DisplayType\":\"NORMAL\"},\"Quality\":{\"Value\":5,\"ValueLabel\":null,\"MaxLabel\":null,\"Label\":\"Quality\",\"Id\":\"Quality\",\"ValueRange\":5,\"MinLabel\":null,\"DisplayType\":\"NORMAL\"}},\"LastModeratedTime\":\"2011-06-29T00:09:31.000+00:00\"}],\"Limit\":1}"
    
    let requestReviewIncludeProductsCategoriesAuthors = "{\"HasErrors\":false,\"Includes\":{\"Products\":{\"1000001\":{\"Brand\":{\"Name\":\"GE\",\"Id\":\"otttwtzo9imo28ssfm58x1hm\"},\"ISBNs\":[],\"UPCs\":[],\"Description\":\"This extra-large capacity dryer lets you choose between 8 dry cycles, so you can use the proper settings for your clothes. The auto dry function uses thermostats to tell when your laundry is dry, reducing wear and tear.\",\"ManufacturerPartNumbers\":[],\"Attributes\":{},\"QuestionIds\":[],\"BrandExternalId\":\"otttwtzo9imo28ssfm58x1hm\",\"ProductPageUrl\":\"http://myshco.com/appliances/dryers/profile.php\",\"FamilyIds\":[],\"AttributesOrder\":[],\"ImageUrl\":\"http://myshco.com/productImages/profile.png\",\"EANs\":[],\"Name\":\"Profile 7.5 Cu. Ft. Colossal Capacity Electric Dryer\",\"CategoryId\":\"1011\",\"ReviewIds\":[],\"Id\":\"1000001\",\"StoryIds\":[],\"ModelNumbers\":[]}},\"CategoriesOrder\":[\"1010\",\"1011\"],\"AuthorsOrder\":[\"TEST_AUTHOR\"],\"Authors\":{\"TEST_AUTHOR\":{\"AdditionalFieldsOrder\":[],\"Avatar\":{},\"UserNickname\":\"Test12345\",\"Photos\":[],\"ContextDataValues\":{},\"Videos\":[],\"ContextDataValuesOrder\":[],\"ContributorRank\":\"NONE\",\"SubmissionId\":null,\"StoryIds\":[],\"AnswerIds\":[],\"QuestionIds\":[],\"BadgesOrder\":[\"Staff\"],\"Badges\":{\"Staff\":{\"BadgeType\":\"Affiliation\",\"Id\":\"Staff\",\"ContentType\":\"REVIEWER\"}},\"Location\":null,\"SecondaryRatingsOrder\":[],\"ProductRecommendationIds\":[],\"AdditionalFields\":{},\"SubmissionTime\":\"2011-06-22T12:41:21.000+00:00\",\"IPAddress\":null,\"ModerationStatus\":\"APPROVED\",\"ReviewIds\":[],\"ThirdPartyIds\":[],\"Id\":\"TEST_AUTHOR\",\"SecondaryRatings\":{},\"CommentIds\":[],\"LastModeratedTime\":\"2011-06-29T00:09:31.000+00:00\"}},\"Categories\":{\"1011\":{\"Name\":\"Dryers\",\"Attributes\":{},\"ParentId\":\"1010\",\"QuestionIds\":[],\"AttributesOrder\":[],\"ImageUrl\":null,\"Id\":\"1011\",\"StoryIds\":[],\"ProductIds\":[],\"CategoryPageUrl\":\"http://myshco.com/MySH_appliances.php\"},\"1010\":{\"Name\":\"Appliances\",\"ParentId\":null,\"Attributes\":{},\"QuestionIds\":[],\"AttributesOrder\":[],\"ImageUrl\":null,\"Id\":\"1010\",\"StoryIds\":[],\"ProductIds\":[],\"CategoryPageUrl\":\"http://myshco.com/MySH_appliances.php\"}},\"ProductsOrder\":[\"1000001\"]},\"Offset\":0,\"TotalResults\":1,\"Locale\":\"en_US\",\"Errors\":[],\"Results\":[{\"TagDimensions\":{},\"TagDimensionsOrder\":[],\"AdditionalFieldsOrder\":[],\"Cons\":null,\"IsRecommended\":null,\"IsRatingsOnly\":false,\"UserNickname\":\"Test12345\",\"Pros\":null,\"Photos\":[],\"ContextDataValues\":{},\"Videos\":[],\"ContextDataValuesOrder\":[],\"SubmissionId\":null,\"LastModificationTime\":\"2016-05-27T18:15:24.000+00:00\",\"TotalFeedbackCount\":16,\"TotalPositiveFeedbackCount\":13,\"UserLocation\":null,\"BadgesOrder\":[\"Staff\"],\"Badges\":{\"Staff\":{\"BadgeType\":\"Affiliation\",\"Id\":\"Staff\",\"ContentType\":\"REVIEW\"}},\"AuthorId\":\"TEST_AUTHOR\",\"IsFeatured\":false,\"SecondaryRatingsOrder\":[\"Value\",\"Quality\"],\"IsSyndicated\":false,\"ProductRecommendationIds\":[],\"Title\":\"This is a test review.\",\"ProductId\":\"1000001\",\"AdditionalFields\":{},\"CampaignId\":null,\"Helpfulness\":0.638889,\"TotalNegativeFeedbackCount\":3,\"SubmissionTime\":\"2011-06-22T12:41:21.000+00:00\",\"Rating\":3,\"IPAddress\":null,\"ContentLocale\":\"en_US\",\"RatingRange\":5,\"TotalCommentCount\":0,\"ReviewText\":\"This is a test review. This is a test review. This is a test review. This is a test review. This is a test review. This is a test review. This is a test review.\",\"ModerationStatus\":\"APPROVED\",\"ClientResponses\":[],\"Id\":\"192612\",\"CommentIds\":[],\"SecondaryRatings\":{\"Value\":{\"Value\":4,\"ValueLabel\":null,\"MaxLabel\":null,\"Label\":\"Value\",\"Id\":\"Value\",\"ValueRange\":5,\"MinLabel\":null,\"DisplayType\":\"NORMAL\"},\"Quality\":{\"Value\":5,\"ValueLabel\":null,\"MaxLabel\":null,\"Label\":\"Quality\",\"Id\":\"Quality\",\"ValueRange\":5,\"MinLabel\":null,\"DisplayType\":\"NORMAL\"}},\"LastModeratedTime\":\"2011-06-29T00:09:31.000+00:00\"}],\"Limit\":10}"
    
    let requestReviewsWithReviewStats = "{\"HasErrors\":false,\"Includes\":{\"Products\":{\"1000001\":{\"Brand\":{\"Name\":\"GE\",\"Id\":\"otttwtzo9imo28ssfm58x1hm\"},\"ISBNs\":[],\"UPCs\":[],\"Attributes\":{},\"Description\":\"This extra-large capacity dryer lets you choose between 8 dry cycles, so you can use the proper settings for your clothes. The auto dry function uses thermostats to tell when your laundry is dry, reducing wear and tear.\",\"ManufacturerPartNumbers\":[],\"QuestionIds\":[],\"BrandExternalId\":\"otttwtzo9imo28ssfm58x1hm\",\"ProductPageUrl\":\"http://myshco.com/appliances/dryers/profile.php\",\"FamilyIds\":[],\"AttributesOrder\":[],\"ImageUrl\":\"http://myshco.com/productImages/profile.png\",\"EANs\":[],\"Name\":\"Profile 7.5 Cu. Ft. Colossal Capacity Electric Dryer\",\"CategoryId\":\"1011\",\"TotalReviewCount\":151,\"ReviewIds\":[],\"Id\":\"1000001\",\"StoryIds\":[],\"ReviewStatistics\":{\"ContextDataDistributionOrder\":[\"Gender\",\"Age\",\"LengthOfOwnership\",\"FrequencyOfUse\",\"Expertise\"],\"HelpfulVoteCount\":14,\"NotRecommendedCount\":33,\"AverageOverallRating\":3.7682,\"SecondaryRatingsAveragesOrder\":[\"Value\",\"Quality\"],\"FeaturedReviewCount\":3,\"TagDistributionOrder\":[\"Pro\",\"Con\"],\"NotHelpfulVoteCount\":3,\"OverallRatingRange\":5,\"SecondaryRatingsAverages\":{\"Value\":{\"Id\":\"Value\",\"AverageRating\":2.75},\"Quality\":{\"Id\":\"Quality\",\"AverageRating\":3.0}},\"RatingDistribution\":[{\"Count\":12,\"RatingValue\":1},{\"Count\":20,\"RatingValue\":2},{\"Count\":23,\"RatingValue\":3},{\"Count\":32,\"RatingValue\":4},{\"Count\":64,\"RatingValue\":5}],\"TotalReviewCount\":151,\"RatingsOnlyReviewCount\":6,\"RecommendedCount\":57,\"TagDistribution\":{\"Pro\":{\"Values\":[{\"Value\":\"Pro 1\",\"Count\":64},{\"Value\":\"Pro 2\",\"Count\":64},{\"Value\":\"Example of wordy Pro value\",\"Count\":57},{\"Value\":\"test\",\"Count\":4},{\"Value\":\"test 1\",\"Count\":4},{\"Value\":\"test 2\",\"Count\":4},{\"Value\":\"test3\",\"Count\":4},{\"Value\":\"test5\",\"Count\":4},{\"Value\":\"test7\",\"Count\":4},{\"Value\":\"test>> i came in the store wanting to try 4 other\",\"Count\":4}],\"Label\":\"Pros\",\"Id\":\"Pro\"},\"Con\":{\"Values\":[{\"Value\":\"Con 2\",\"Count\":58},{\"Value\":\"Con 1\",\"Count\":55},{\"Value\":\"Example of wordy Con value\",\"Count\":51},{\"Value\":\"srthsrth\",\"Count\":4},{\"Value\":\"rthsrth\",\"Count\":3},{\"Value\":\"test 3\",\"Count\":3},{\"Value\":\"test 4\",\"Count\":3},{\"Value\":\"hsrths\",\"Count\":2},{\"Value\":\"srthsr\",\"Count\":2},{\"Value\":\"srthsrt\",\"Count\":2}],\"Label\":\"Cons\",\"Id\":\"Con\"}},\"ContextDataDistribution\":{\"Age\":{\"Values\":[{\"Value\":\"17orUnder\",\"Count\":1},{\"Value\":\"65orOver\",\"Count\":1}],\"Label\":\"Age\",\"Id\":\"Age\"},\"FrequencyOfUse\":{\"Values\":[{\"Value\":\"Daily\",\"Count\":1},{\"Value\":\"Weekly\",\"Count\":1},{\"Value\":\"Yearly\",\"Count\":1}],\"Label\":\"Frequency of use\",\"Id\":\"FrequencyOfUse\"},\"LengthOfOwnership\":{\"Values\":[{\"Value\":\"1month\",\"Count\":1},{\"Value\":\"3months\",\"Count\":1},{\"Value\":\"1year\",\"Count\":1}],\"Label\":\"Length of ownership\",\"Id\":\"LengthOfOwnership\"},\"Gender\":{\"Values\":[{\"Value\":\"Male\",\"Count\":2}],\"Label\":\"Gender\",\"Id\":\"Gender\"},\"Expertise\":{\"Values\":[{\"Value\":\"Beginner\",\"Count\":1},{\"Value\":\"Intermediate\",\"Count\":2}],\"Label\":\"Expertise\",\"Id\":\"Expertise\"}},\"FirstSubmissionTime\":\"2010-07-19T21:25:18.000+00:00\",\"LastSubmissionTime\":\"2011-06-22T12:41:21.000+00:00\"},\"ModelNumbers\":[]}},\"ProductsOrder\":[\"1000001\"]},\"Offset\":0,\"TotalResults\":151,\"Locale\":\"en_US\",\"Errors\":[],\"Results\":[{\"TagDimensions\":{},\"TagDimensionsOrder\":[],\"AdditionalFieldsOrder\":[],\"Cons\":null,\"IsRecommended\":null,\"IsRatingsOnly\":false,\"UserNickname\":\"Test12345\",\"Pros\":null,\"Photos\":[],\"ContextDataValues\":{},\"Videos\":[],\"ContextDataValuesOrder\":[],\"SubmissionId\":null,\"LastModificationTime\":\"2016-05-27T18:15:24.000+00:00\",\"TotalFeedbackCount\":16,\"TotalPositiveFeedbackCount\":13,\"UserLocation\":null,\"BadgesOrder\":[\"Staff\"],\"Badges\":{\"Staff\":{\"BadgeType\":\"Affiliation\",\"Id\":\"Staff\",\"ContentType\":\"REVIEW\"}},\"AuthorId\":\"TEST_AUTHOR\",\"IsFeatured\":false,\"SecondaryRatingsOrder\":[\"Value\",\"Quality\"],\"IsSyndicated\":false,\"ProductRecommendationIds\":[],\"Title\":\"This is a test review.\",\"ProductId\":\"1000001\",\"AdditionalFields\":{},\"CampaignId\":null,\"Helpfulness\":0.638889,\"TotalNegativeFeedbackCount\":3,\"SubmissionTime\":\"2011-06-22T12:41:21.000+00:00\",\"Rating\":3,\"IPAddress\":null,\"ContentLocale\":\"en_US\",\"RatingRange\":5,\"TotalCommentCount\":0,\"ReviewText\":\"This is a test review. This is a test review. This is a test review. This is a test review. This is a test review. This is a test review. This is a test review.\",\"ModerationStatus\":\"APPROVED\",\"ClientResponses\":[],\"Id\":\"192612\",\"CommentIds\":[],\"SecondaryRatings\":{\"Value\":{\"Value\":4,\"ValueLabel\":null,\"MaxLabel\":null,\"Label\":\"Value\",\"Id\":\"Value\",\"ValueRange\":5,\"MinLabel\":null,\"DisplayType\":\"NORMAL\"},\"Quality\":{\"Value\":5,\"ValueLabel\":null,\"MaxLabel\":null,\"Label\":\"Quality\",\"Id\":\"Quality\",\"ValueRange\":5,\"MinLabel\":null,\"DisplayType\":\"NORMAL\"}},\"LastModeratedTime\":\"2011-06-29T00:09:31.000+00:00\"}],\"Limit\":1}"
    
    let requestQuestionById = "{\"Includes\":{},\"HasErrors\":false,\"Offset\":0,\"TotalResults\":1,\"Locale\":\"en_US\",\"Errors\":[],\"Results\":[{\"QuestionSummary\":\"test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test\",\"TagDimensions\":{},\"TagDimensionsOrder\":[],\"AdditionalFieldsOrder\":[],\"TotalAnswerCount\":0,\"QuestionDetails\":null,\"UserNickname\":\"sdftgyhuj\",\"Photos\":[],\"ContextDataValues\":{},\"CategoryId\":null,\"Videos\":[],\"ContextDataValuesOrder\":[],\"LastModificationTime\":\"2015-11-17T06:30:02.000+00:00\",\"SubmissionId\":null,\"AnswerIds\":[],\"TotalFeedbackCount\":0,\"TotalPositiveFeedbackCount\":0,\"BadgesOrder\":[],\"UserLocation\":null,\"Badges\":{},\"AuthorId\":\"TEST_AUTHOR\",\"IsFeatured\":false,\"IsSyndicated\":null,\"ProductRecommendationIds\":[],\"ProductId\":\"1000001\",\"AdditionalFields\":{},\"CampaignId\":null,\"TotalNegativeFeedbackCount\":0,\"SubmissionTime\":\"2011-06-27T11:52:02.000+00:00\",\"ContentLocale\":\"en_US\",\"IPAddress\":null,\"ModerationStatus\":\"APPROVED\",\"Id\":\"14902\",\"LastModeratedTime\":\"2011-06-29T00:10:10.000+00:00\"}],\"Limit\":10}"
    
    let requestCommentsByProduct = "{\"Includes\":{},\"HasErrors\":false,\"Offset\":0,\"TotalResults\":5,\"Locale\":\"en_US\",\"Errors\":[],\"Results\":[{\"UserNickname\":\"tester45454\",\"CommentText\":\"TEST>> I came in the store wanting to try 4 other dresses, and didnt even notice this one. I walked by a huge poster, and this beautiful dress caught my eye! It ended up being the first dress I tried on, and it was right then, that I knew this was the right dress. After this dress, I tried on 4 other ones, but decided on buying this one. It fits sooooo perfectly, and it gives your body a wonderful shape.testI love this dress sooooooo much!!\",\"Photos\":[],\"Videos\":[],\"StoryId\":null,\"LastModificationTime\":\"2011-06-30T21:17:17.000+00:00\",\"SubmissionId\":null,\"TotalFeedbackCount\":0,\"TotalPositiveFeedbackCount\":0,\"ReviewId\":\"192548\",\"UserLocation\":null,\"BadgesOrder\":[],\"Badges\":{},\"AuthorId\":\"TEST_AUTHOR\",\"IsSyndicated\":null,\"Title\":\"TEST>> I came in the store wanting to try 4 other\",\"ProductRecommendationIds\":[],\"CampaignId\":null,\"TotalNegativeFeedbackCount\":0,\"SubmissionTime\":\"2011-06-27T11:44:52.000+00:00\",\"ContentLocale\":\"en_US\",\"IPAddress\":null,\"ModerationStatus\":\"APPROVED\",\"Id\":\"12024\",\"LastModeratedTime\":\"2011-06-30T21:17:17.000+00:00\"},{\"UserNickname\":\"Test80\",\"CommentText\":\"Test Comment>> Staging>> Test Comment>> Staging>> Test Comment>> Staging>> Test Comment>> Staging>> Test Comment>> Staging>> Test Comment>> Staging>> Test Comment>> Staging>> Test Comment>> Staging>> Test Comment>> Staging>> Test Comment>> Staging>> Test Comment>> Staging>> Test Comment>> Staging>> Test Comment>> Staging>> Test Comment>> Staging>> Test Comment>> Staging>> Test Comment>> Staging>> Test Comment>> Staging>> Test Comment>> Staging>> Test Comment>> Staging>> Test Comment>> Staging>> Test Comment>> Staging>> Test Comment>> Staging>> Test Comment>> Staging>> Test Comment>> Staging>> Test Comment>> Staging>>\",\"Photos\":[{\"Caption\":null,\"Sizes\":{\"thumbnail\":{\"Url\":\"http://apireadonly.ugc.bazaarvoice.com/bvstaging/5556/80214/photoThumb.jpg\",\"Id\":\"thumbnail\"},\"normal\":{\"Url\":\"http://apireadonly.ugc.bazaarvoice.com/bvstaging/5556/80214/photo.jpg\",\"Id\":\"normal\"}},\"SizesOrder\":[\"thumbnail\",\"normal\"],\"Id\":\"80214\"},{\"Caption\":null,\"Sizes\":{\"thumbnail\":{\"Url\":\"http://apireadonly.ugc.bazaarvoice.com/bvstaging/5556/80215/photoThumb.jpg\",\"Id\":\"thumbnail\"},\"normal\":{\"Url\":\"http://apireadonly.ugc.bazaarvoice.com/bvstaging/5556/80215/photo.jpg\",\"Id\":\"normal\"}},\"SizesOrder\":[\"thumbnail\",\"normal\"],\"Id\":\"80215\"},{\"Caption\":null,\"Sizes\":{\"thumbnail\":{\"Url\":\"http://apireadonly.ugc.bazaarvoice.com/bvstaging/5556/80216/photoThumb.jpg\",\"Id\":\"thumbnail\"},\"normal\":{\"Url\":\"http://apireadonly.ugc.bazaarvoice.com/bvstaging/5556/80216/photo.jpg\",\"Id\":\"normal\"}},\"SizesOrder\":[\"thumbnail\",\"normal\"],\"Id\":\"80216\"},{\"Caption\":null,\"Sizes\":{\"thumbnail\":{\"Url\":\"http://apireadonly.ugc.bazaarvoice.com/bvstaging/5556/80217/photoThumb.jpg\",\"Id\":\"thumbnail\"},\"normal\":{\"Url\":\"http://apireadonly.ugc.bazaarvoice.com/bvstaging/5556/80217/photo.jpg\",\"Id\":\"normal\"}},\"SizesOrder\":[\"thumbnail\",\"normal\"],\"Id\":\"80217\"},{\"Caption\":null,\"Sizes\":{\"thumbnail\":{\"Url\":\"http://apireadonly.ugc.bazaarvoice.com/bvstaging/5556/80218/photoThumb.jpg\",\"Id\":\"thumbnail\"},\"normal\":{\"Url\":\"http://apireadonly.ugc.bazaarvoice.com/bvstaging/5556/80218/photo.jpg\",\"Id\":\"normal\"}},\"SizesOrder\":[\"thumbnail\",\"normal\"],\"Id\":\"80218\"},{\"Caption\":\"image 1\",\"Sizes\":{\"thumbnail\":{\"Url\":\"http://apireadonly.ugc.bazaarvoice.com/bvstaging/5556/80219/photoThumb.jpg\",\"Id\":\"thumbnail\"},\"normal\":{\"Url\":\"http://apireadonly.ugc.bazaarvoice.com/bvstaging/5556/80219/photo.jpg\",\"Id\":\"normal\"}},\"SizesOrder\":[\"thumbnail\",\"normal\"],\"Id\":\"80219\"}],\"Videos\":[],\"StoryId\":null,\"LastModificationTime\":\"2011-06-30T21:17:17.000+00:00\",\"SubmissionId\":null,\"TotalFeedbackCount\":0,\"TotalPositiveFeedbackCount\":0,\"ReviewId\":\"192548\",\"UserLocation\":\"New York, NY\",\"BadgesOrder\":[],\"Badges\":{},\"AuthorId\":\"5ih9oznzm8\",\"IsSyndicated\":null,\"Title\":\"Test Comment>> Staging>> Test Comment>> Staging>>\",\"ProductRecommendationIds\":[],\"CampaignId\":null,\"TotalNegativeFeedbackCount\":0,\"SubmissionTime\":\"2011-05-06T13:22:28.000+00:00\",\"IPAddress\":null,\"ContentLocale\":\"en_US\",\"ModerationStatus\":\"APPROVED\",\"Id\":\"12023\",\"LastModeratedTime\":\"2011-06-30T21:17:16.000+00:00\"},{\"UserNickname\":\"tester007\",\"CommentText\":\"Test Test Test Test Test Test Test Test Test Test Test Test Test Test Test Test Test Test Test Test Test Test Test Test Test Test Test Test Test Test Test Test Test Test Test Test Test Test Test Test Test Test Test Test Test Test Test Test Test Test Test Test Test Test Test\",\"Photos\":[{\"Caption\":\"Caption Caption Caption Caption Caption Caption Caption Caption Caption Caption Caption Caption Caption Caption Caption Caption Caption Caption Caption Caption Caption Caption Caption Caption Caption Caption Caption Caption Caption Caption Caption Caption\",\"Sizes\":{\"thumbnail\":{\"Url\":\"http://apireadonly.ugc.bazaarvoice.com/bvstaging/5556/80213/photoThumb.jpg\",\"Id\":\"thumbnail\"},\"normal\":{\"Url\":\"http://apireadonly.ugc.bazaarvoice.com/bvstaging/5556/80213/photo.jpg\",\"Id\":\"normal\"}},\"SizesOrder\":[\"thumbnail\",\"normal\"],\"Id\":\"80213\"}],\"Videos\":[],\"StoryId\":null,\"LastModificationTime\":\"2011-06-30T21:17:15.000+00:00\",\"SubmissionId\":null,\"TotalFeedbackCount\":0,\"TotalPositiveFeedbackCount\":0,\"ReviewId\":\"192548\",\"UserLocation\":\"test location\",\"BadgesOrder\":[],\"Badges\":{},\"AuthorId\":\"7bx5njpuduw\",\"IsSyndicated\":null,\"Title\":\"Test\",\"ProductRecommendationIds\":[],\"CampaignId\":null,\"TotalNegativeFeedbackCount\":0,\"SubmissionTime\":\"2011-05-05T21:23:04.000+00:00\",\"IPAddress\":null,\"ContentLocale\":\"en_US\",\"ModerationStatus\":\"APPROVED\",\"Id\":\"12022\",\"LastModeratedTime\":\"2011-06-30T21:17:15.000+00:00\"},{\"UserNickname\":\"eruy7\",\"CommentText\":\"test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test\",\"Photos\":[],\"Videos\":[],\"StoryId\":null,\"LastModificationTime\":\"2011-06-30T21:17:14.000+00:00\",\"SubmissionId\":null,\"TotalFeedbackCount\":0,\"TotalPositiveFeedbackCount\":0,\"ReviewId\":\"192548\",\"UserLocation\":null,\"BadgesOrder\":[],\"Badges\":{},\"AuthorId\":\"fd9p5jl6374\",\"IsSyndicated\":null,\"Title\":\"test test test test test test test test test test\",\"ProductRecommendationIds\":[],\"CampaignId\":null,\"TotalNegativeFeedbackCount\":0,\"SubmissionTime\":\"2011-04-14T12:00:46.000+00:00\",\"ContentLocale\":\"en_US\",\"IPAddress\":null,\"ModerationStatus\":\"APPROVED\",\"Id\":\"12021\",\"LastModeratedTime\":\"2011-06-30T21:17:14.000+00:00\"},{\"UserNickname\":\"cvbvbcvbt6767\",\"CommentText\":\"test comment <> test comment <> test comment <> test comment <> test comment <> test comment <> test comment <> test comment <> test comment <> test comment <> test comment <> test comment <> test comment <> test comment <> test comment <> test comment <> test comment <> test comment <> test comment <> test comment <> test comment <> test comment <> test comment <> test comment <>\",\"Photos\":[{\"Caption\":null,\"Sizes\":{\"thumbnail\":{\"Url\":\"http://apireadonly.ugc.bazaarvoice.com/bvstaging/5556/80212/photoThumb.jpg\",\"Id\":\"thumbnail\"},\"normal\":{\"Url\":\"http://apireadonly.ugc.bazaarvoice.com/bvstaging/5556/80212/photo.jpg\",\"Id\":\"normal\"}},\"SizesOrder\":[\"thumbnail\",\"normal\"],\"Id\":\"80212\"}],\"Videos\":[],\"StoryId\":null,\"LastModificationTime\":\"2011-06-30T21:17:14.000+00:00\",\"SubmissionId\":null,\"TotalFeedbackCount\":0,\"TotalPositiveFeedbackCount\":0,\"ReviewId\":\"192548\",\"UserLocation\":null,\"BadgesOrder\":[],\"Badges\":{},\"AuthorId\":\"hpkd6gf9bbk\",\"IsSyndicated\":null,\"Title\":\"test comment <> RR\",\"ProductRecommendationIds\":[],\"CampaignId\":null,\"TotalNegativeFeedbackCount\":0,\"SubmissionTime\":\"2011-04-06T22:57:41.000+00:00\",\"ContentLocale\":\"en_US\",\"IPAddress\":null,\"ModerationStatus\":\"APPROVED\",\"Id\":\"12020\",\"LastModeratedTime\":\"2011-06-30T21:17:14.000+00:00\"}],\"Limit\":10}"
    
    let requestAnswer = "{\"Includes\":{},\"HasErrors\":false,\"Offset\":0,\"TotalResults\":1,\"Locale\":\"en_US\",\"Errors\":[],\"Results\":[{\"AdditionalFieldsOrder\":[],\"UserNickname\":\"tester45454\",\"IsBrandAnswer\":false,\"Photos\":[],\"ContextDataValues\":{},\"Videos\":[],\"ContextDataValuesOrder\":[],\"LastModificationTime\":\"2011-06-29T00:10:05.000+00:00\",\"QuestionId\":\"14874\",\"SubmissionId\":null,\"TotalFeedbackCount\":0,\"TotalPositiveFeedbackCount\":0,\"UserLocation\":null,\"BadgesOrder\":[],\"Badges\":{},\"AuthorId\":\"TEST_AUTHOR\",\"IsFeatured\":false,\"IsSyndicated\":null,\"ProductRecommendationIds\":[],\"AdditionalFields\":{},\"CampaignId\":null,\"TotalNegativeFeedbackCount\":0,\"SubmissionTime\":\"2011-06-27T11:45:51.000+00:00\",\"ContentLocale\":\"en_US\",\"IPAddress\":null,\"ModerationStatus\":\"APPROVED\",\"Id\":\"16369\",\"AnswerText\":\"TEST>> I came in the store wanting to try 4 other dresses, and didnt even notice this one. I walked by a huge poster, and this beautiful dress caught my eye! It ended up being the first dress I tried on, and it was right then, that I knew this was the right dress. After this dress, I tried on 4 other ones, but decided on buying this one. It fits sooooo perfectly, and it gives your body a wonderful shape.testI love this dress sooooooo much!!\",\"LastModeratedTime\":\"2011-06-29T00:10:05.000+00:00\"}],\"Limit\":10}"
    
    let requestAuthors = "{\"HasErrors\":false,\"Includes\":{\"Reviews\":{\"191977\":{\"TagDimensions\":{},\"TagDimensionsOrder\":[],\"AdditionalFieldsOrder\":[],\"Cons\":null,\"IsRecommended\":true,\"IsRatingsOnly\":false,\"UserNickname\":\"Charlie78\",\"Pros\":null,\"Photos\":[{\"Caption\":\",jhojlkjlk\",\"Sizes\":{\"thumbnail\":{\"Url\":\"http://apireadonly.ugc.bazaarvoice.com/bvstaging/5556/72588/photoThumb.jpg\",\"Id\":\"thumbnail\"},\"normal\":{\"Url\":\"http://apireadonly.ugc.bazaarvoice.com/bvstaging/5556/72588/photo.jpg\",\"Id\":\"normal\"}},\"SizesOrder\":[\"thumbnail\",\"normal\"],\"Id\":\"72588\"}],\"ContextDataValues\":{\"Gender\":{\"Value\":\"Female\",\"ValueLabel\":\"Female\",\"DimensionLabel\":\"Gender\",\"Id\":\"Gender\"}},\"Videos\":[],\"ContextDataValuesOrder\":[\"Gender\"],\"SubmissionId\":null,\"LastModificationTime\":\"2012-12-03T22:03:02.000+00:00\",\"TotalFeedbackCount\":1,\"TotalPositiveFeedbackCount\":1,\"UserLocation\":\"jhkjhjkj\",\"BadgesOrder\":[\"featured\"],\"Badges\":{\"featured\":{\"BadgeType\":\"Custom\",\"Id\":\"featured\",\"ContentType\":\"REVIEW\"}},\"AuthorId\":\"zxcvbn\",\"SecondaryRatingsOrder\":[],\"IsFeatured\":true,\"IsSyndicated\":false,\"ProductRecommendationIds\":[],\"ProductId\":\"test1\",\"Title\":\"Donec mattis cursus ipsum eu eleifend.\",\"AdditionalFields\":{},\"CampaignId\":null,\"Helpfulness\":0.52381,\"TotalNegativeFeedbackCount\":0,\"SubmissionTime\":\"2009-06-26T15:48:46.000+00:00\",\"Rating\":5,\"IPAddress\":null,\"ContentLocale\":\"en_US\",\"RatingRange\":5,\"TotalCommentCount\":0,\"ReviewText\":\"Donec mattis cursus ipsum eu eleifend. Cras sapien arcu, volutpat fringilla scelerisque sed; suscipit convallis dolor. Nullam viverra enim velit. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nullam consectetur urna sit amet augue pulvinar tincidunt. Vivamus convallis lobortis quam eu mollis. Vestibulum sit amet lorem dolor. Suspendisse dignissim eleifend suscipit. Aliquam sem ligula, porta a sodales eu, tincidunt vitae est. Aliquam dolor leo, euismod sed tristique quis, congue metus.\",\"ModerationStatus\":\"APPROVED\",\"ClientResponses\":[],\"Id\":\"191977\",\"SecondaryRatings\":{},\"CommentIds\":[],\"LastModeratedTime\":\"2011-06-28T14:09:45.000+00:00\"}},\"ReviewsOrder\":[\"191977\"]},\"Offset\":0,\"TotalResults\":5957,\"Locale\":\"en_US\",\"Errors\":[],\"Results\":[{\"AdditionalFieldsOrder\":[],\"Avatar\":{},\"UserNickname\":\"Charlie78\",\"Photos\":[],\"ContextDataValues\":{},\"Videos\":[],\"ContextDataValuesOrder\":[],\"ContributorRank\":\"NONE\",\"SubmissionId\":null,\"StoryIds\":[],\"AnswerIds\":[],\"QuestionIds\":[],\"BadgesOrder\":[],\"Badges\":{},\"Location\":null,\"SecondaryRatingsOrder\":[],\"ProductRecommendationIds\":[],\"AdditionalFields\":{},\"SubmissionTime\":\"2009-06-26T15:48:46.000+00:00\",\"IPAddress\":null,\"ModerationStatus\":\"APPROVED\",\"ReviewIds\":[\"191977\"],\"ThirdPartyIds\":[],\"Id\":\"zxcvbn\",\"SecondaryRatings\":{},\"CommentIds\":[],\"LastModeratedTime\":\"2011-06-28T14:09:45.000+00:00\"},{\"AdditionalFieldsOrder\":[],\"Avatar\":{},\"UserNickname\":\"zuzu78\",\"Photos\":[],\"ContextDataValues\":{},\"Videos\":[],\"ContextDataValuesOrder\":[],\"ContributorRank\":\"NONE\",\"SubmissionId\":null,\"StoryIds\":[],\"AnswerIds\":[],\"QuestionIds\":[],\"BadgesOrder\":[],\"Badges\":{},\"Location\":null,\"SecondaryRatingsOrder\":[],\"ProductRecommendationIds\":[],\"AdditionalFields\":{},\"SubmissionTime\":\"2016-02-10T15:15:27.000+00:00\",\"IPAddress\":\"81.252.251.70\",\"ModerationStatus\":\"APPROVED\",\"ReviewIds\":[],\"ThirdPartyIds\":[],\"Id\":\"zuzu78\",\"SecondaryRatings\":{},\"CommentIds\":[],\"LastModeratedTime\":\"2016-02-10T15:30:05.000+00:00\"},{\"AdditionalFieldsOrder\":[],\"Avatar\":{},\"UserNickname\":\"zuschmittm\",\"Photos\":[],\"ContextDataValues\":{},\"Videos\":[],\"ContextDataValuesOrder\":[],\"ContributorRank\":\"NONE\",\"SubmissionId\":null,\"StoryIds\":[],\"AnswerIds\":[],\"QuestionIds\":[],\"BadgesOrder\":[],\"Badges\":{},\"Location\":null,\"SecondaryRatingsOrder\":[],\"ProductRecommendationIds\":[],\"AdditionalFields\":{},\"SubmissionTime\":\"2016-02-10T15:20:16.000+00:00\",\"IPAddress\":\"81.252.251.70\",\"ModerationStatus\":\"APPROVED\",\"ReviewIds\":[],\"ThirdPartyIds\":[],\"Id\":\"zuschmittm\",\"SecondaryRatings\":{},\"CommentIds\":[],\"LastModeratedTime\":\"2016-02-10T15:30:05.000+00:00\"},{\"AdditionalFieldsOrder\":[],\"Avatar\":{},\"UserNickname\":\"zurizuga\",\"Photos\":[],\"ContextDataValues\":{},\"Videos\":[],\"ContextDataValuesOrder\":[],\"ContributorRank\":\"NONE\",\"SubmissionId\":null,\"StoryIds\":[],\"AnswerIds\":[],\"QuestionIds\":[],\"BadgesOrder\":[],\"Badges\":{},\"Location\":null,\"SecondaryRatingsOrder\":[],\"ProductRecommendationIds\":[],\"AdditionalFields\":{},\"SubmissionTime\":\"2016-02-10T15:24:00.000+00:00\",\"IPAddress\":\"81.252.251.70\",\"ModerationStatus\":\"APPROVED\",\"ReviewIds\":[],\"ThirdPartyIds\":[],\"Id\":\"zurizuga\",\"SecondaryRatings\":{},\"CommentIds\":[],\"LastModeratedTime\":\"2016-02-10T15:30:05.000+00:00\"},{\"AdditionalFieldsOrder\":[],\"Avatar\":{},\"UserNickname\":\"zou2310\",\"Photos\":[],\"ContextDataValues\":{},\"Videos\":[],\"ContextDataValuesOrder\":[],\"ContributorRank\":\"NONE\",\"SubmissionId\":null,\"StoryIds\":[],\"AnswerIds\":[],\"QuestionIds\":[],\"BadgesOrder\":[],\"Badges\":{},\"Location\":null,\"SecondaryRatingsOrder\":[],\"ProductRecommendationIds\":[],\"AdditionalFields\":{},\"SubmissionTime\":\"2016-02-10T15:48:32.000+00:00\",\"IPAddress\":\"81.252.251.70\",\"ModerationStatus\":\"APPROVED\",\"ReviewIds\":[],\"ThirdPartyIds\":[],\"Id\":\"zou2310\",\"SecondaryRatings\":{},\"CommentIds\":[],\"LastModeratedTime\":\"2016-02-10T16:00:04.000+00:00\"},{\"AdditionalFieldsOrder\":[],\"Avatar\":{},\"UserNickname\":\"zohramoghraoui\",\"Photos\":[],\"ContextDataValues\":{},\"Videos\":[],\"ContextDataValuesOrder\":[],\"ContributorRank\":\"NONE\",\"SubmissionId\":null,\"StoryIds\":[],\"AnswerIds\":[],\"QuestionIds\":[],\"BadgesOrder\":[],\"Badges\":{},\"Location\":null,\"SecondaryRatingsOrder\":[],\"ProductRecommendationIds\":[],\"AdditionalFields\":{},\"SubmissionTime\":\"2016-02-10T16:13:53.000+00:00\",\"IPAddress\":\"81.252.251.70\",\"ModerationStatus\":\"APPROVED\",\"ReviewIds\":[],\"ThirdPartyIds\":[],\"Id\":\"zohramoghraoui\",\"SecondaryRatings\":{},\"CommentIds\":[],\"LastModeratedTime\":\"2016-02-10T16:15:03.000+00:00\"},{\"AdditionalFieldsOrder\":[],\"Avatar\":{},\"UserNickname\":\"zoger\",\"Photos\":[],\"ContextDataValues\":{},\"Videos\":[],\"ContextDataValuesOrder\":[],\"ContributorRank\":\"NONE\",\"SubmissionId\":null,\"StoryIds\":[],\"AnswerIds\":[],\"QuestionIds\":[],\"BadgesOrder\":[],\"Badges\":{},\"Location\":null,\"SecondaryRatingsOrder\":[],\"ProductRecommendationIds\":[],\"AdditionalFields\":{},\"SubmissionTime\":\"2016-02-10T15:48:12.000+00:00\",\"IPAddress\":\"81.252.251.70\",\"ModerationStatus\":\"APPROVED\",\"ReviewIds\":[],\"ThirdPartyIds\":[],\"Id\":\"zoger\",\"SecondaryRatings\":{},\"CommentIds\":[],\"LastModeratedTime\":\"2016-02-10T16:00:04.000+00:00\"},{\"AdditionalFieldsOrder\":[],\"Avatar\":{},\"UserNickname\":\"shrtsrthrthsrhts\",\"Photos\":[],\"ContextDataValues\":{},\"Videos\":[],\"ContextDataValuesOrder\":[],\"ContributorRank\":\"NONE\",\"SubmissionId\":null,\"StoryIds\":[],\"AnswerIds\":[],\"QuestionIds\":[],\"BadgesOrder\":[],\"Badges\":{},\"Location\":null,\"SecondaryRatingsOrder\":[],\"ProductRecommendationIds\":[],\"AdditionalFields\":{},\"SubmissionTime\":\"2011-01-26T17:20:00.000+00:00\",\"IPAddress\":null,\"ModerationStatus\":\"APPROVED\",\"ReviewIds\":[],\"ThirdPartyIds\":[],\"Id\":\"zmqa0ojcw0\",\"SecondaryRatings\":{},\"CommentIds\":[],\"LastModeratedTime\":\"2011-06-29T00:09:55.000+00:00\"},{\"AdditionalFieldsOrder\":[],\"Avatar\":{},\"UserNickname\":\"zizou2509\",\"Photos\":[],\"ContextDataValues\":{},\"Videos\":[],\"ContextDataValuesOrder\":[],\"ContributorRank\":\"NONE\",\"SubmissionId\":null,\"StoryIds\":[],\"AnswerIds\":[],\"QuestionIds\":[],\"BadgesOrder\":[],\"Badges\":{},\"Location\":null,\"SecondaryRatingsOrder\":[],\"ProductRecommendationIds\":[],\"AdditionalFields\":{},\"SubmissionTime\":\"2016-02-10T15:17:39.000+00:00\",\"IPAddress\":\"81.252.251.70\",\"ModerationStatus\":\"APPROVED\",\"ReviewIds\":[],\"ThirdPartyIds\":[],\"Id\":\"zizou2509\",\"SecondaryRatings\":{},\"CommentIds\":[],\"LastModeratedTime\":\"2016-02-10T15:30:05.000+00:00\"},{\"AdditionalFieldsOrder\":[],\"Avatar\":{},\"UserNickname\":\"zippix33\",\"Photos\":[],\"ContextDataValues\":{},\"Videos\":[],\"ContextDataValuesOrder\":[],\"ContributorRank\":\"NONE\",\"SubmissionId\":null,\"StoryIds\":[],\"AnswerIds\":[],\"QuestionIds\":[],\"BadgesOrder\":[],\"Badges\":{},\"Location\":null,\"SecondaryRatingsOrder\":[],\"ProductRecommendationIds\":[],\"AdditionalFields\":{},\"SubmissionTime\":\"2016-02-10T16:19:09.000+00:00\",\"IPAddress\":\"81.252.251.70\",\"ModerationStatus\":\"APPROVED\",\"ReviewIds\":[],\"ThirdPartyIds\":[],\"Id\":\"zippix33\",\"SecondaryRatings\":{},\"CommentIds\":[],\"LastModeratedTime\":\"2016-02-10T16:30:05.000+00:00\"}],\"Limit\":10}"
    
    let requestProducts = "{\"Includes\":{},\"HasErrors\":false,\"Offset\":0,\"TotalResults\":1,\"Locale\":\"en_US\",\"Errors\":[],\"Results\":[{\"Brand\":{\"Name\":\"mysh\",\"Id\":\"cskg0snv1x3chrqlde0zklodb\"},\"ISBNs\":[],\"UPCs\":[],\"Description\":\"Our pinpoint oxford is crafted from only the finest 80's two-ply cotton fibers.Single-needle stitching on all seams for a smooth flat appearance. Tailored with our Traditionalstraight collar and button cuffs. Machine wash. Imported.\",\"ManufacturerPartNumbers\":[],\"Attributes\":{},\"QuestionIds\":[],\"BrandExternalId\":\"cskg0snv1x3chrqlde0zklodb\",\"ProductPageUrl\":null,\"FamilyIds\":[],\"AttributesOrder\":[],\"ImageUrl\":\"http://myshco.com/productImages/shirt.jpg\",\"EANs\":[],\"Name\":\"Dress Shirt\",\"CategoryId\":\"testCategory1031\",\"ReviewIds\":[],\"Id\":\"test1\",\"StoryIds\":[],\"ModelNumbers\":[]}],\"Limit\":10}"
    
    let requestProductsWithStatsOnReviewsAndQA = "{\"Includes\":{},\"HasErrors\":false,\"Offset\":0,\"TotalResults\":1,\"Locale\":\"en_US\",\"Errors\":[],\"Results\":[{\"UPCs\":[],\"Brand\":{\"Name\":\"mysh\",\"Id\":\"cskg0snv1x3chrqlde0zklodb\"},\"ISBNs\":[],\"Attributes\":{},\"ManufacturerPartNumbers\":[],\"Description\":\"Our pinpoint oxford is crafted from only the finest 80's two-ply cotton fibers.Single-needle stitching on all seams for a smooth flat appearance. Tailored with our Traditionalstraight collar and button cuffs. Machine wash. Imported.\",\"QuestionIds\":[],\"ProductPageUrl\":null,\"BrandExternalId\":\"cskg0snv1x3chrqlde0zklodb\",\"FamilyIds\":[],\"TotalAnswerCount\":46,\"AttributesOrder\":[],\"ImageUrl\":\"http://myshco.com/productImages/shirt.jpg\",\"EANs\":[],\"TotalQuestionCount\":32,\"Name\":\"Dress Shirt\",\"QAStatistics\":{\"ContextDataDistributionOrder\":[],\"HelpfulVoteCount\":0,\"BestAnswerCount\":0,\"QuestionHelpfulVoteCount\":0,\"TotalAnswerCount\":46,\"LastQuestionAnswerTime\":\"2011-06-07T19:00:36.000+00:00\",\"TagDistributionOrder\":[],\"FirstAnswerTime\":\"2009-05-29T12:23:00.000+00:00\",\"AnswerNotHelpfulVoteCount\":0,\"TotalQuestionCount\":32,\"QuestionNotHelpfulVoteCount\":0,\"FeaturedQuestionCount\":0,\"FeaturedAnswerCount\":0,\"TagDistribution\":{},\"FirstQuestionTime\":\"2009-03-10T12:08:49.000+00:00\",\"ContextDataDistribution\":{},\"AnswerHelpfulVoteCount\":0,\"LastQuestionTime\":\"2011-03-25T11:50:43.000+00:00\",\"LastAnswerTime\":\"2011-06-07T19:00:36.000+00:00\"},\"CategoryId\":\"testCategory1031\",\"TotalReviewCount\":278,\"ReviewIds\":[],\"Id\":\"test1\",\"StoryIds\":[],\"ReviewStatistics\":{\"ContextDataDistributionOrder\":[\"Gender\"],\"HelpfulVoteCount\":4,\"NotRecommendedCount\":44,\"AverageOverallRating\":4.0254,\"SecondaryRatingsAveragesOrder\":[\"Value\",\"Quality\"],\"FeaturedReviewCount\":10,\"TagDistributionOrder\":[\"Pro\",\"Con\"],\"NotHelpfulVoteCount\":4,\"OverallRatingRange\":5,\"SecondaryRatingsAverages\":{\"Value\":{\"Id\":\"Value\",\"AverageRating\":4.6666665},\"Quality\":{\"Id\":\"Quality\",\"AverageRating\":2.0}},\"RatingDistribution\":[{\"Count\":22,\"RatingValue\":1},{\"Count\":21,\"RatingValue\":2},{\"Count\":24,\"RatingValue\":3},{\"Count\":70,\"RatingValue\":4},{\"Count\":139,\"RatingValue\":5},{\"Count\":12,\"RatingValue\":0}],\"TotalReviewCount\":278,\"RatingsOnlyReviewCount\":47,\"RecommendedCount\":213,\"TagDistribution\":{\"Pro\":{\"Values\":[{\"Value\":\"Quality\",\"Count\":40},{\"Value\":\"Organic Fabric\",\"Count\":38},{\"Value\":\"Pro 2\",\"Count\":21},{\"Value\":\"Pro 1\",\"Count\":14},{\"Value\":\"Example of wordy Pro value\",\"Count\":12},{\"Value\":\"test\",\"Count\":6},{\"Value\":\"Color\",\"Count\":1},{\"Value\":\"Comfortable\",\"Count\":1},{\"Value\":\"Design\",\"Count\":1},{\"Value\":\"Durable\",\"Count\":1}],\"Label\":\"Pros\",\"Id\":\"Pro\"},\"Con\":{\"Values\":[{\"Value\":\"Quality\",\"Count\":30},{\"Value\":\"Features\",\"Count\":29},{\"Value\":\"Con 2\",\"Count\":17},{\"Value\":\"Example of wordy Con value\",\"Count\":11},{\"Value\":\"Con 1\",\"Count\":9},{\"Value\":\"test\",\"Count\":3},{\"Value\":\"add a con\",\"Count\":1},{\"Value\":\"adfadsf\",\"Count\":1},{\"Value\":\"Low quality\",\"Count\":1},{\"Value\":\"Not durable\",\"Count\":1}],\"Label\":\"Cons\",\"Id\":\"Con\"}},\"ContextDataDistribution\":{\"Gender\":{\"Values\":[{\"Value\":\"Male\",\"Count\":73},{\"Value\":\"Female\",\"Count\":59}],\"Label\":\"Gender\",\"Id\":\"Gender\"}},\"FirstSubmissionTime\":\"2008-02-24T18:29:37.000+00:00\",\"LastSubmissionTime\":\"2011-06-09T19:39:02.000+00:00\"},\"ModelNumbers\":[]}],\"Limit\":10}"
    
}

// helper method to parse JSON for these tests
extension String {
    var json : [String : AnyObject]? {
        get {
            
            do {
                
                let data = self.data(using: String.Encoding.utf8)
                return try JSONSerialization.jsonObject(with: data!, options: []) as? [String:AnyObject]
                
            } catch {
                
                XCTFail()
                
            }
            
            return nil
            
        }
    }
}

func getParamValue(_ parameters: NSMutableArray, keyToSearchFor:String) -> String? {
    for param in parameters {
        if let pair = param as? BVStringKeyValuePair {
            if keyToSearchFor == pair.key {
                return pair.value
            }
        }
    }
//    if let params = parameters as? [StringKeyValuePair] {
//        for param in params {
//            if keyToSearchFor == param.key {
//                return param.value
//            }
//        }
//    }

    return nil
}
