<!DOCTYPE html>
<html lang="en">

  <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.2/jquery.min.js"></script>

  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js" integrity="sha384-0mSbJDEHialfmuBBQP6A4Qrprq5OVfW37PRR3j5ELqxss1yVqOtnepnHVP9aJ7xS" crossorigin="anonymous"></script>
  <script type="text/javascript" src="./assets/js/highlight.pack.js"></script>

  <script type="text/javascript" src="./assets/js/jquery_rotate.js"></script>
  <script type="text/javascript" src="./assets/js/main.js"></script>
  <script type="text/javascript" src="./assets/js/popover.js"></script>

  <script>
    
$(function(){

	// select the tab in the sidebar to reflect current page position

	var tabName = "Authentication";

	$('.nav-link.active').removeClass('active');
	console.log('active tab: ', tabName);
	var nav_link = $('.nav-link:contains("' + tabName + '")');
	console.log('actual nav link:', nav_link);
	nav_link.addClass('active');
	
});
  </script>

  <script>
    /**
 * Scrolls to the element with the provided class name.
 *
 * @param {String} id - the id of the element we want to scroll to
 */
function scrollToElementById(id) {
  if (!id) {
    throw TypeError(
      'scrollToElementByID(string) - requires a string to be passed in as param'
    );
  }
  const element = document.getElementById(id);
  if (!element) {
    throw Error(`No element found with id "${id}".`);
  }
  scrollToElement(element);
}

/**
 * Scrolls the viewport to the provided element.
 * @param  {DOMNode} element the element to scroll to.
 */
function scrollToElement(element) {
  try {
    element.scrollIntoView();
  } catch (error) {
    console.log(error);
  }
}

/**
 * Clicks on the element with the provided class name.
 * @param {String} id - the id of the element we want to click on.
 */
function triggerClickById(id) {
  if (!id) {
    throw TypeError(
      'triggerClickById(string) - requires a string to be passed in as param'
    );
  }
  const element = document.getElementById(id);
  if (!element) {
    throw Error(`No element found with id "${id}".`);
  }
  triggerClickOnElement(element);
}

/**
 * Clicks on the provided element.
 * @param  {DOMNode} element the element to click on.
 */
function triggerClickOnElement(element) {
  try {
    element.click();
  } catch (error) {
    console.log(error);
  }
}

function scrollAndClickById(id) {
  triggerClickById(id);
  scrollToElementById(id);
}

  </script>


  <script>
  $(document).ready(function(){
      $('[data-toggle="popover"]').popover();
  });

  /* Close all the other popovers */
  $('html').on('mouseup', function(e) {
      if(!$(e.target).closest('.popover').length) {
          $('.popover').each(function(){
              $(this.previousSibling).popover('hide');
          });
      }
  });

  </script>

  <script>hljs.initHighlightingOnLoad();</script>


  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.1/css/font-awesome.min.css">
  <link rel="stylesheet" type="text/css" href="./assets/css/bootstrap.min.css">
  <link rel="stylesheet" type="text/css" href="./assets/css/bvbootstrap.css">
  <link rel="stylesheet" type="text/css" href="./assets/css/highlightjs/default.min.css">
  <link rel="stylesheet" type="text/css" href="./assets/css/main.css">


  <link rel="apple-touch-icon-precomposed" sizes="57x57" href="./public/apple-touch-icon-57x57.png" />
  <link rel="apple-touch-icon-precomposed" sizes="114x114" href="./public/apple-touch-icon-114x114.png" />
  <link rel="apple-touch-icon-precomposed" sizes="72x72" href="./public/apple-touch-icon-72x72.png" />
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="./public/apple-touch-icon-144x144.png" />
  <link rel="apple-touch-icon-precomposed" sizes="60x60" href="./public/apple-touch-icon-60x60.png" />
  <link rel="apple-touch-icon-precomposed" sizes="120x120" href="./public/apple-touch-icon-120x120.png" />
  <link rel="apple-touch-icon-precomposed" sizes="76x76" href="./public/apple-touch-icon-76x76.png" />
  <link rel="apple-touch-icon-precomposed" sizes="152x152" href="./public/apple-touch-icon-152x152.png" />
  <link rel="icon" type="image/png" href="./public/favicon-196x196.png" sizes="196x196" />
  <link rel="icon" type="image/png" href="./public/favicon-96x96.png" sizes="96x96" />
  <link rel="icon" type="image/png" href="./public/favicon-32x32.png" sizes="32x32" />
  <link rel="icon" type="image/png" href="./public/favicon-16x16.png" sizes="16x16" />
  <link rel="icon" type="image/png" href="./public/favicon-128.png" sizes="128x128" />
  <meta name="application-name" content="&nbsp;"/>
  <meta name="msapplication-TileColor" content="#FFFFFF" />
  <meta name="msapplication-TileImage" content="./public/mstile-144x144.png" />
  <meta name="msapplication-square70x70logo" content="./public/mstile-70x70.png" />
  <meta name="msapplication-square150x150logo" content="./public/mstile-150x150.png" />

  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

    ga('create', UA-56370630-4, 'auto');
    ga('set', {
      title: 'Authentication'
    });
    ga('send', 'pageview');
  </script>

</head>


  <body>
    <div id="portal_container">
      
      <nav class="navbar-fixed-top">
    <div class="navbar-header">
        <div class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1"
             aria-expanded="false">
            <i class="fa fa-bars fa-3"
               style="color:#fffff5; background-color: #00AB8E; padding:7px; border-radius: 3px;"></i>

            <a href="/" class="bv_logo" style="font-size: 22px;">
                <span class="bv_teal">&nbsp;bazaar</span><span class="bv_white">voice</span><span
                    class="bv_teal">:</span>
            </a>
        </div>

    </div>
    <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
        <ul class="nav side-nav nav-stacked nav-pills">
            <div class="bv_logo">
                <a href="/bv-ios-sdk/index.html">
                    <span class="bv_teal">bazaar</span><span class="bv_white">voice</span><span class="bv_teal">:</span>
                </a>
            </div>
            <li class="nav-item">
                <a class="nav-link active" href="index.html">
                    <span><i class="m-r-1 fa fa-file-text-o"></i>Getting Started</span>
                </a>
                <ul>
                    <li class="nav-item">
                        <a class="nav-link" href="requirements.html">
                            <span>Requirements</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="installation.html">
                            <span>Installation and Configuration</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="example_projects.html">
                            <span>Example Projects</span>
                        </a>
                    </li>
                </ul>
            </li>
            <li class="nav-item">
                <span class="nav-link" href="modules.html">
                    <span><i class="m-r-1 fa fa-cogs"></i>Modules</span>
                </span>
                <ul>


                    <!-- BV Pixel -->
					<li class="nav-item">
                                    <a class="nav-link" href="bvpixel_implementation.html"><span>BV Pixel</span></a>
                                </li>

                     <!-- Conversations -->
                    <li class="nav-item">
                        <a class="nav-link" role="button" data-toggle="collapse" href="#conversationsDropdown"
                           aria-expanded="false" aria-controls="conversationsDropdown">
                                <span><span>Conversations</span><span style="float:right;"><i
                                        id="conversationsDropdownArrow"
                                        class="fa fa-sort-desc fa-rotate-270"></i></span></span>
                        </a>
                        <div class="collapse in"
                             id="conversationsDropdown">
                            <ul>
                                <li class="nav-item">
                                    <a class="nav-link" href="content_display.html"><span>Content Display</span></a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" href="content_submission.html"><span>Content Submission</span></a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" href="conversations_authentication.html"><span>Authentication</span></a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" href="conversations_iovation.html"><span>Authenticity with iovation</span></a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" href="conversations_badges.html"><span>Badges</span></a>
                                </li>
                            </ul>
                        </div>

                    </li>

                    <!-- Curations -->
                    <li class="nav-item">
                        <a class="nav-link" role="button" data-toggle="collapse" href="#curationsDropdown"
                           aria-expanded="false" aria-controls="curationsDropdown">
                                <span><span>Curations</span><span style="float:right;">
                                    <i id="curationsDropdownArrow" class="fa fa-sort-desc  fa-rotate-270"></i>
                                </span></span>
                        </a>
                        <div class="collapse "
                             id="curationsDropdown">
                            <ul>
                                <li class="nav-item">
                                    <a class="nav-link" href="curations_display.html"><span>Curations Display</span></a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" href="curations_custom_posts.html"><span>Curations Custom Posts</span></a>
                                </li>
                            </ul>
                        </div>
                    </li>

                    <!-- Product Recommendations -->
                    <li class="nav-item">
                        <a class="nav-link" href="product_recommendations.html"><span>Product Recommendations (Beta)</span></a>
                    </li>

                    <!-- Ratings Reviews Stores -->
                     <li class="nav-item">
                        <a class="nav-link" role="button" data-toggle="collapse" href="#conversationsStoresDropdown"
                           aria-expanded="false" aria-controls="conversationsStoresDropdown">
                                <span><span>Ratings and Reviews for Stores</span><span style="float:right;"><i
                                        id="conversationsStoresDropdownArrow"
                                        class="fa fa-sort-desc fa-rotate-270"></i></span></span>
                        </a>
                        <div class="collapse "
                             id="conversationsStoresDropdown">
                            <ul>
                                <li class="nav-item">
                                    <a class="nav-link" href="conversations_stores.html"><span>Display and Submit API</span></a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" href="conversations_stores_push.html"><span>Stores Push Notifications</span></a>
                                </li>
                            </ul>
                        </div>
                    </li>
                </ul>
            </li>

            <li class="nav-item">
                <a class="nav-link" href="user_authentication_token.html">
                    <span><i class="m-r-1 fa fa-lock"></i>User Authentication Token</span>
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="ios_9_considerations.html">
                    <span><i class="m-r-1 fa fa-mobile"></i> iOS 9 Considerations</span>
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="faq_support.html">
                    <span><i class="m-r-1 fa fa-question-circle"></i>FAQ and Support</span>
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="./ios-assets/api_reference/index.html">
                    <span><i class="m-r-1 fa fa-book"></i>API Reference</span>
                </a>
            </li>
            <br>
            <li class="nav-item">
                <a class="nav-link"
                   href="mailto:support@bazaarvoice.com?subject=iOS SDK documentation feedback"
                   style="border: 1px #fff solid;">
                    <span><i class="m-r-1 fa fa-envelope"></i>Feedback</span>
                </a>
            </li>
        </ul>
    </div>
</nav>


      <div id="application_container">
        <div id="task_container">
          <div id="task_content" class="app-content">
            <div class="scroll-container scrollable--scrollbar">
              <div class="page-container">

                <div class="flex flex-row" id="content_title">
  Conversations - Authentication
</div>

<p>
  When a user wants to submit Consumer Generated Content (CGC), we need to verify that the user
  is who they say they are, and that they consent to their CGC being published. In order to do this
  a User Authentication String is required with all Submission Requests. Depending on your
  configuration, you will create/retrieve this UAS is one of two ways: BV Hosted Authentication or
  Site Authentication.
</p>

<p>
  See <a href="https://knowledge.bazaarvoice.com/wp-content/conversations/en_US/Learn/user_authentication.html#determine-your-authentication-configuration">how to determine your authentication configuration</a>
  to learn which method you are configured for.
</p>

<ol>
  <li><a href="#bvhosted_auth">BV Hosted Authentication</a></li>
  <li><a href="#site_auth">Site Authentication</a></li>
</ol>

<div id="bvhosted_auth">
<h2>BV Hosted Authentication</h2>
<br/>

<h3>Stage 1: App does not have a UAS for the user yet</h3>
<br/>

<h4>How to construct the hosted authentication submission object parameters</h4>
<br/>

<ul class="nav nav-tabs" role="tablist">
  <li role="presentation" class="active"><a href="#swift" aria-controls="swift" role="tab" data-toggle="tab">Swift</a></li>
  <li role="presentation"><a href="#objc" aria-controls="objc" role="tab" data-toggle="tab">Objective-C</a></li>
</ul>
<!-- Tab panes -->
<div class="tab-content code-switcher">
	<!-- swift -->
	<div role="tabpanel" class="tab-pane active" id="swift">
<pre><code class="swift"> // 'submission' is one of the BVBaseUGCSubmission objects, e.g., BVAnswerSubmission, BVReviewSubmission, etc.
 submission.hostedAuthenticationEmail = "foo@bar.com"
 submission.hostedAuthenticationCallback = "http://www.example.com/your/authentication-service"
</code></pre>
	</div>
	<!-- objective-c -->
	<div role="tabpanel" class="tab-pane" id="objc">
<pre><code class="objectivec"> // 'submission' is one of the BVBaseUGCSubmission objects, e.g., BVAnswerSubmission, BVReviewSubmission, etc.
 submission.hostedAuthenticationEmail = @"foo@bar.com";
 submission.hostedAuthenticationCallback = @"http://www.example.com/your/authentication-service";
</code></pre>
	</div>
</div>
<br/>

<p>
  <font color="#666"><i>For more information regarding this step in the hosted authentication process please refer to the </i></font><a href="https://developer.bazaarvoice.com/conversations-api/tutorials/submission/authentication/bv-mastered#step-1:-submit-content">Conversation API Authentication Tutorial</a>.
  <br/>
  <font color="#666"><i>For more information regarding each of the submission objects please also refer to the </i></font><a href="content_submission.html">Content Submission documentation</a>.
</p>

<h4>When to use</h4>
<p>
  Use these parameters if you have not managed to retrieve the User Authentication String
  (UAS) for the user. This method will send the user an email to confirm the
  <code>BVBaseUGCSubmission</code> that this was attached to. The email will contain
  a link for them to tap to confirm, and it will be composed of:
<ol>
  <li>The <code>callbackUrl</code> you provided here</li>
  <li>A <code>bv_authtoken</code> query parameter generated by Bazaarvoice. You will use this to fetch a UAS.</li>
</ol>
e.g. <code>http://www.example.com/your/authentication-service?bv_authtoken=a7a4278ff33887d352fcdef30edd143f487dc881</code>
</p>
<h4>How to retrieve a <code>bv_authtoken</code></h4>
<p>
  You may setup your backend to retrieve the callback when the user opens the link in a
  browser and then send that <code>bv_authtoken</code> for the specific user via an
  out-of-band request, push notification, text message, etc. so that your application
  can utilize it.
</p>
<h4>How to retrieve a UAS</h4>
<p>
  Once you have the <code>bv_authtoken</code> from the previous step, you can send off a <code>BVUASSubmission</code>
  which will return a <code>BVUASSubmissionResponse</code> via the success closure. From within the <code>BVUASSubmissionResponse</code> the
  <code>userAuthenticationString</code> property contains the <code>BVSubmittedUAS</code> object that provides the
  <code>authenticatedUser</code> property interface to obtain the actual UAS.
</p>

<ul class="nav nav-tabs" role="tablist">
  <li role="presentation" class="active"><a href="#swift" aria-controls="swift" role="tab" data-toggle="tab">Swift</a></li>
  <li role="presentation"><a href="#objc" aria-controls="objc" role="tab" data-toggle="tab">Objective-C</a></li>
</ul>
<!-- Tab panes -->
<div class="tab-content code-switcher">
	<!-- swift -->
	<div role="tabpanel" class="tab-pane active" id="swift">
<pre><code class="swift"> var bv_authtoken:String = "..." // 'bv_authtoken' string value
 let uasSubmission:BVUASSubmission = BVUASSubmission(bvAuthToken: bvAuthToken)

 uasSubmission.submit({ (response: BVUASSubmissionResponse) in

   // uas acquisition submitted successfully! ðŸŽ‰

   if let uas:BVSubmittedUAS = response.userAuthenticationString,
   let authenticatedUser:String = uas.authenticatedUser {
     print("This is the actual UAS string value: \(authenticatedUser)")
   }

   // You should store authenticatedUser for the logged in user to make all future requests
   // setting the user property for subsequent submissions.

 }) { (errors:[Error]) in

   // handle failure appropriately

 }
</code></pre>
	</div>
	<!-- objective-c -->
	<div role="tabpanel" class="tab-pane" id="objc">
<pre><code class="objectivec"> NSString *bv_authtoken = @"..."; // 'bv_authtoken' string value
 BVUASSubmission *uasSubmission = [[BVUASSubmission alloc] initWithBvAuthToken:bv_authtoken];

 [uasSubmission submit:^(BVUASSubmissionResponse *_Nonnull response) {

   // uas acquisition submitted successfully! ðŸŽ‰

   BVSubmittedUAS *uas = response.userAuthenticationString;
   if (uas && uas.authenticatedUser) {
     NSLog(@"This is the actual UAS string value: %@", uas.authenticatedUser);
   }

   // You should store authenticatedUser for the logged in user to make all future requests
   // setting the user property for subsequent submissions.

 } failure:^(NSArray<NSError *> *_Nonnull errors){

   // handle failure appropriately

 }];
</code></pre>
	</div>
</div>
<br/>

<h4>What if I do not send a UAS?</h4>
<p>
  All content will still be submitted and moderated, and will show up in the display requests.
</p>
<p>
  The consequences for not retrieving the UAS, and using the other constructor, is that the
  user will continue to be sent an email to confirm for each submission.
</p>
<p>
  The consequences for a user not confirming their submission is that their user profile will
  not be merged with the content they submitted. If at any point in the future, your app is able
  to send a UAS then all of those cumulative profiles will be merged.
</p>

<div id="uas_auth">
<h3>Stage 2: App has a UAS for the user</h3>
<br/>

<h4>How to construct the UAS authentication submission object parameters</h4>
<br/>

<ul class="nav nav-tabs" role="tablist">
  <li role="presentation" class="active"><a href="#swift" aria-controls="swift" role="tab" data-toggle="tab">Swift</a></li>
  <li role="presentation"><a href="#objc" aria-controls="objc" role="tab" data-toggle="tab">Objective-C</a></li>
</ul>
<!-- Tab panes -->
<div class="tab-content code-switcher">
	<!-- swift -->
	<div role="tabpanel" class="tab-pane active" id="swift">
<pre><code class="swift"> // 'submission' is one of the BVBaseUGCSubmission objects, e.g., BVAnswerSubmission, BVReviewSubmission, etc.
 submission.user = "..." // authenticatedUser string value from previous step
</code></pre>
	</div>
	<!-- objective-c -->
	<div role="tabpanel" class="tab-pane" id="objc">
<pre><code class="objectivec"> // 'submission' is one of the BVBaseUGCSubmission objects, e.g., BVAnswerSubmission, BVReviewSubmission, etc.
 submission.user = @"..." // uas.authenticatedUser string value from previous step
</code></pre>
	</div>
</div>
<br/>

<p>
<font color="#666"><i>For more information regarding each of the submission objects please also refer to the </i></font><a href="content_submission.html">Content Submission documentation</a>.
</p>

<h4>When to use</h4>
<p>Use this constructor if you managed to retrieve the UAS for the user.</p>
</div>

<div id="site_auth">
<h2>Site Authentication</h2>
<br/>

<h4>How to construct the UAS authentication submission object parameters</h4>
<p>
  Constructing the UAS authentication submission object parameters are done the same way as the <a href="#uas_auth">last step of the Hosted Authentication</a> process.
</p>

<h4>How to get the UAS</h4>
<p>
  You will need to implement this to be able to retrieve an encrypted User Authentication String (UAS) from your company's backend.
</p>
<p>
  Your company may have an existing endpoint to retrieve this from, if your web team has already implemented
  this. If not you will need to follow <a href="http://knowledge.bazaarvoice.com/wp-content/conversations/en_US/Collect/site_authentication.html#step-3-generate-a-user-authentication-string-uas">these steps</a>.
</p>
</div>



<div class="well well-sm">
	<h5>Author</h5>
	<p>Copyright 2017 Bazaarvoice, Inc. All rights reserved.</p>
	<h5>License</h5>
	<p>Use of the Bazaarvoice Mobile SDKs is contingent on your agreement and conformance with <a href="http://www.bazaarvoice.com/legal/api-terms-of-use.html">Bazaarvoice's API Terms of Use</a>. Additionally, you agree to store all data acquired by the SDK or Bazaarvoice's API only within the storage of the individual application instance using the SDK or API. You also agree to use the data acquired by the SDK or API only within the context of the same individual application instance and only for purposes consistent with that application's purpose. Except as otherwise noted, the Bazaarvoice Android and iOS SDKs are licensed under the <a href="http://www.apache.org/licenses/LICENSE-2.0.html">Apache License, Version 2.0</a>.</p>
</div>
<br>


              </div>
            </div>
          </div>
        </div>        
      </div>
    </div>
  </body>
