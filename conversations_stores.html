<!DOCTYPE html>
<html lang="en">

  <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.2/jquery.min.js"></script>

  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js" integrity="sha384-0mSbJDEHialfmuBBQP6A4Qrprq5OVfW37PRR3j5ELqxss1yVqOtnepnHVP9aJ7xS" crossorigin="anonymous"></script>
  <script type="text/javascript" src="./assets/js/highlight.pack.js"></script>

  <script type="text/javascript" src="./assets/js/jquery_rotate.js"></script>
  <script type="text/javascript" src="./assets/js/main.js"></script>
  <script type="text/javascript" src="./assets/js/popover.js"></script>

  <script>
    
$(function(){

	// select the tab in the sidebar to reflect current page position

	var tabName = "Display and Submit API";

	$('.nav-link.active').removeClass('active');
	console.log('active tab: ', tabName);
	var nav_link = $('.nav-link:contains("' + tabName + '")');
	console.log('actual nav link:', nav_link);
	nav_link.addClass('active');
	
});
  </script>

  <script>
    /**
 * Scrolls to the element with the provided class name.
 *
 * @param {String} id - the id of the element we want to scroll to
 */
function scrollToElementById(id) {
  if (!id) {
    throw TypeError(
      'scrollToElementByID(string) - requires a string to be passed in as param'
    );
  }
  const element = document.getElementById(id);
  if (!element) {
    throw Error(`No element found with id "${id}".`);
  }
  scrollToElement(element);
}

/**
 * Scrolls the viewport to the provided element.
 * @param  {DOMNode} element the element to scroll to.
 */
function scrollToElement(element) {
  try {
    element.scrollIntoView();
  } catch (error) {
    console.log(error);
  }
}

/**
 * Clicks on the element with the provided class name.
 * @param {String} id - the id of the element we want to click on.
 */
function triggerClickById(id) {
  if (!id) {
    throw TypeError(
      'triggerClickById(string) - requires a string to be passed in as param'
    );
  }
  const element = document.getElementById(id);
  if (!element) {
    throw Error(`No element found with id "${id}".`);
  }
  triggerClickOnElement(element);
}

/**
 * Clicks on the provided element.
 * @param  {DOMNode} element the element to click on.
 */
function triggerClickOnElement(element) {
  try {
    element.click();
  } catch (error) {
    console.log(error);
  }
}

function scrollAndClickById(id) {
  triggerClickById(id);
  scrollToElementById(id);
}

  </script>


  <script>
  $(document).ready(function(){
      $('[data-toggle="popover"]').popover();
  });

  /* Close all the other popovers */
  $('html').on('mouseup', function(e) {
      if(!$(e.target).closest('.popover').length) {
          $('.popover').each(function(){
              $(this.previousSibling).popover('hide');
          });
      }
  });

  </script>

  <script>hljs.initHighlightingOnLoad();</script>


  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.1/css/font-awesome.min.css">
  <link rel="stylesheet" type="text/css" href="./assets/css/bootstrap.min.css">
  <link rel="stylesheet" type="text/css" href="./assets/css/bvbootstrap.css">
  <link rel="stylesheet" type="text/css" href="./assets/css/highlightjs/default.min.css">
  <link rel="stylesheet" type="text/css" href="./assets/css/main.css">


  <link rel="apple-touch-icon-precomposed" sizes="57x57" href="./public/apple-touch-icon-57x57.png" />
  <link rel="apple-touch-icon-precomposed" sizes="114x114" href="./public/apple-touch-icon-114x114.png" />
  <link rel="apple-touch-icon-precomposed" sizes="72x72" href="./public/apple-touch-icon-72x72.png" />
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="./public/apple-touch-icon-144x144.png" />
  <link rel="apple-touch-icon-precomposed" sizes="60x60" href="./public/apple-touch-icon-60x60.png" />
  <link rel="apple-touch-icon-precomposed" sizes="120x120" href="./public/apple-touch-icon-120x120.png" />
  <link rel="apple-touch-icon-precomposed" sizes="76x76" href="./public/apple-touch-icon-76x76.png" />
  <link rel="apple-touch-icon-precomposed" sizes="152x152" href="./public/apple-touch-icon-152x152.png" />
  <link rel="icon" type="image/png" href="./public/favicon-196x196.png" sizes="196x196" />
  <link rel="icon" type="image/png" href="./public/favicon-96x96.png" sizes="96x96" />
  <link rel="icon" type="image/png" href="./public/favicon-32x32.png" sizes="32x32" />
  <link rel="icon" type="image/png" href="./public/favicon-16x16.png" sizes="16x16" />
  <link rel="icon" type="image/png" href="./public/favicon-128.png" sizes="128x128" />
  <meta name="application-name" content="&nbsp;"/>
  <meta name="msapplication-TileColor" content="#FFFFFF" />
  <meta name="msapplication-TileImage" content="./public/mstile-144x144.png" />
  <meta name="msapplication-square70x70logo" content="./public/mstile-70x70.png" />
  <meta name="msapplication-square150x150logo" content="./public/mstile-150x150.png" />

  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

    ga('create', UA-56370630-4, 'auto');
    ga('set', {
      title: 'Display and Submit API'
    });
    ga('send', 'pageview');
  </script>

</head>


  <body>
    <div id="portal_container">
      
      <nav class="navbar-fixed-top">
    <div class="navbar-header">
        <div class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1"
             aria-expanded="false">
            <i class="fa fa-bars fa-3"
               style="color:#fffff5; background-color: #00AB8E; padding:7px; border-radius: 3px;"></i>

            <a href="/" class="bv_logo" style="font-size: 22px;">
                <span class="bv_teal">&nbsp;bazaar</span><span class="bv_white">voice</span><span
                    class="bv_teal">:</span>
            </a>
        </div>

    </div>
    <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
        <ul class="nav side-nav nav-stacked nav-pills">
            <div class="bv_logo">
                <a href="/bv-ios-sdk/index.html">
                    <span class="bv_teal">bazaar</span><span class="bv_white">voice</span><span class="bv_teal">:</span>
                </a>
            </div>
            <li class="nav-item">
                <a class="nav-link active" href="index.html">
                    <span><i class="m-r-1 fa fa-file-text-o"></i>Getting Started</span>
                </a>
                <ul>
                    <li class="nav-item">
                        <a class="nav-link" href="requirements.html">
                            <span>Requirements</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="installation.html">
                            <span>Installation and Configuration</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="example_projects.html">
                            <span>Example Projects</span>
                        </a>
                    </li>
                </ul>
            </li>
            <li class="nav-item">
                <span class="nav-link" href="modules.html">
                    <span><i class="m-r-1 fa fa-cogs"></i>Modules</span>
                </span>
                <ul>


                    <!-- BV Pixel -->
					<li class="nav-item">
                                    <a class="nav-link" href="bvpixel_implementation.html"><span>BV Pixel</span></a>
                                </li>

                     <!-- Conversations -->
                    <li class="nav-item">
                        <a class="nav-link" role="button" data-toggle="collapse" href="#conversationsDropdown"
                           aria-expanded="false" aria-controls="conversationsDropdown">
                                <span><span>Conversations</span><span style="float:right;"><i
                                        id="conversationsDropdownArrow"
                                        class="fa fa-sort-desc fa-rotate-270"></i></span></span>
                        </a>
                        <div class="collapse "
                             id="conversationsDropdown">
                            <ul>
                                <li class="nav-item">
                                    <a class="nav-link" href="content_display.html"><span>Content Display</span></a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" href="content_submission.html"><span>Content Submission</span></a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" href="conversations_authentication.html"><span>Authentication</span></a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" href="conversations_iovation.html"><span>Authenticity with iovation</span></a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" href="conversations_badges.html"><span>Badges</span></a>
                                </li>
                            </ul>
                        </div>

                    </li>

                    <!-- Curations -->
                    <li class="nav-item">
                        <a class="nav-link" role="button" data-toggle="collapse" href="#curationsDropdown"
                           aria-expanded="false" aria-controls="curationsDropdown">
                                <span><span>Curations</span><span style="float:right;">
                                    <i id="curationsDropdownArrow" class="fa fa-sort-desc  fa-rotate-270"></i>
                                </span></span>
                        </a>
                        <div class="collapse "
                             id="curationsDropdown">
                            <ul>
                                <li class="nav-item">
                                    <a class="nav-link" href="curations_display.html"><span>Curations Display</span></a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" href="curations_custom_posts.html"><span>Curations Custom Posts</span></a>
                                </li>
                            </ul>
                        </div>
                    </li>

                    <!-- Product Recommendations -->
                    <li class="nav-item">
                        <a class="nav-link" href="product_recommendations.html"><span>Product Recommendations (Beta)</span></a>
                    </li>

                    <!-- Ratings Reviews Stores -->
                     <li class="nav-item">
                        <a class="nav-link" role="button" data-toggle="collapse" href="#conversationsStoresDropdown"
                           aria-expanded="false" aria-controls="conversationsStoresDropdown">
                                <span><span>Ratings and Reviews for Stores</span><span style="float:right;"><i
                                        id="conversationsStoresDropdownArrow"
                                        class="fa fa-sort-desc fa-rotate-270"></i></span></span>
                        </a>
                        <div class="collapse in"
                             id="conversationsStoresDropdown">
                            <ul>
                                <li class="nav-item">
                                    <a class="nav-link" href="conversations_stores.html"><span>Display and Submit API</span></a>
                                </li>
                            </ul>
                        </div>
                    </li>
                </ul>
            </li>

            <li class="nav-item">
                <a class="nav-link" href="analytics_and_location.html">
                    <span><i class="m-r-1 fa fa-globe"></i>Analytics and Location</span>
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="user_authentication_token.html">
                    <span><i class="m-r-1 fa fa-lock"></i>User Authentication Token</span>
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="networking_delegation.html">
                    <span><i class="m-r-1 fa fa-paper-plane"></i>Networking Delegation</span>
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="ios_9_considerations.html">
                    <span><i class="m-r-1 fa fa-mobile"></i> iOS 9 Considerations</span>
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="faq_support.html">
                    <span><i class="m-r-1 fa fa-question-circle"></i>FAQ and Support</span>
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="./ios-assets/api_reference/index.html">
                    <span><i class="m-r-1 fa fa-book"></i>API Reference</span>
                </a>
            </li>
            <br>
            <li class="nav-item">
                <a class="nav-link"
                   href="mailto:support@bazaarvoice.com?subject=iOS SDK documentation feedback"
                   style="border: 1px #fff solid;">
                    <span><i class="m-r-1 fa fa-envelope"></i>Feedback</span>
                </a>
            </li>
        </ul>
    </div>
</nav>


      <div id="application_container">
        <div id="task_container">
          <div id="task_content" class="app-content">
            <div class="scroll-container scrollable--scrollbar">
              <div class="page-container">

                <div class="flex flex-row" id="content_title">
	Ratings and Reviews for Stores - Display and Submission API
</div>

<p>Use the Bazaarvoice Mobile SDKs to enable Ratings and Reviews for Stores functionality, such as displaying store reviews and submitting a review and photo of a store. The API is very similar to the Conversations API for product reviews, with the addition that the BVSDK provides additional meta-info for stores, such as geo-location. Contact Bazaarvoice to set up Ratings and Reviews for Stores.</p>

<p class="bg-info well-lg" style="padding:4px;"><i class="fa fa-hand-o-right"></i>  Important: You will need your <strong>apiKeyConversationsStores</strong> to implement and use Ratings and Reviews for Stores with Mobile SDKs.</p>

</p>
Check out the code samples below to get an overview of what functionality you can use with the BVSDK.


<hr>

<p><span class="bg-warning well-lg" style="padding:4px;"> <i class="fa fa-hand-o-right"></i>  Important: Before you start implementing this Mobile SDK module, verify your installation by checking the steps on the <a href="./installation.html">Installation and Configuration</a> page.  </span></p>


<br>

<ul class="nav nav-tabs" role="tablist">
  <li role="presentation" class="active"><a href="#reviews" aria-controls="reviews" role="tab" data-toggle="tab">Display Store Reviews</a></li>
  <li role="presentation"><a href="#storebulkratings" aria-controls="storebulkratings" role="tab" data-toggle="tab">Display Store Ratings</a></li>
  <li role="presentation"><a href="#submitstorereview" aria-controls="submitstorereview" role="tab" data-toggle="tab">Submit Store Review</a></li>
  
</ul>
<div class="tab-content code-switcher">
	
	<div role="tabpanel" class="tab-pane active" id="reviews">

	<!-- Store Reviews -->
		<br>
<h4>Display Store Reviews</h4>
<p>Use the <code>BVStoreReviewsRequest</code> object to construct parameters and make the API request. Display the results in the <code>response.results</code> value, which contain an array of <code>BVReview</code> objects.</p>

<img src="ios-img/conversations_stores/store_reviews_display.png" style="height:410px; box-shadow: 0px 0px 8px #444;" class="center-block img-fluid" />

<ul class="nav nav-tabs" role="tablist">
  <li role="presentation" class="active"><a href="#swift" aria-controls="swift" role="tab" data-toggle="tab">Swift</a></li>
  <li role="presentation"><a href="#objc" aria-controls="objc" role="tab" data-toggle="tab">Objective-C</a></li>
</ul>

<!-- Tab panes -->
<div class="tab-content code-switcher">
	<!-- swift -->
	<div role="tabpanel" class="tab-pane active" id="swift">
<pre><code class="swift">import BVSDK
...

let request = BVStoreReviewsRequest(storeId: store.identifier, limit: 20, offset: Int32(self.reviews.count))

// Sorting and filter FilterOptions
request.addSort(.Rating, order: .Descending)

request.load({ (response) in
	// success - show your reviews!
	// response.results contains an array of BVReview objects
}) { (error) in
	// failure - tell the user something went wrong : (
}

</code></pre>
	</div>
	<!-- objective-c -->
	<div role="tabpanel" class="tab-pane" id="objc">
<pre><code class="objectivec">BVStoreReviewsRequest *request = [[BVStoreReviewsRequest alloc] initWithStoreId:@"1" limit:20 offset:0];
[request addSort:BVSortOptionProductsRating order:BVSortOrderDescending];

[request load:^(BVStoreReviewsResponse * _Nonnull response) {
	// success
	// response.results contains an array of BVReview objects
} failure:^(NSArray<NSError *> * _Nonnull errors) {
	// error
	// failure - tell the user something went wrong : (
}];</code></pre>
	</div>
</div>
<br>

<br>

	</div>
	
	<div role="tabpanel" class="tab-pane" id="storebulkratings">

		<!-- Store Bulk Ratings -->
		<br>
<h4>Display Store Ratings</h4>

<p>Use the <code>BVBulkStoreItemsRequest</code> object to construct parameters and make the API request. Display the results in the <code>response.results</code> value, which contain an array of <code>BVStore</code> objects.</p>

The <code>BVBulkStoreItemsRequest</code> contains two constructors you can use depending whether you want to fetch all the stores with limit and offset, or you just want to fetch one or more stores if you already have the store id.

<img src="ios-img/conversations_stores/stores_bulk_ratings_display.png" style="height:410px; box-shadow: 0px 0px 8px #444;" class="center-block img-fluid" />

<h4>Display Stores with Limit and Offset</h4>


<ul class="nav nav-tabs" role="tablist">
  <li role="presentation" class="active"><a href="#swift" aria-controls="swift" role="tab" data-toggle="tab">Swift</a></li>
  <li role="presentation"><a href="#objc" aria-controls="objc" role="tab" data-toggle="tab">Objective-C</a></li>
</ul>
<!-- Tab panes -->
<div class="tab-content code-switcher">
	<!-- swift -->
	<div role="tabpanel" class="tab-pane active" id="swift">
<pre><code class="swift">import BVSDK
...

let request = BVBulkStoreItemsRequest(20, offset: 0)
    request.includeStatistics(.Reviews)
request.load({ (response) in
    // success
    // Find the array for BVStore objects in response.results
}) { (error) in
    // error - tell the user something went wrong : (
}
</code></pre>
	</div>
	<!-- objective-c -->
	<div role="tabpanel" class="tab-pane" id="objc">
<pre><code class="objectivec">BVBulkStoreItemsRequest *request = [[BVBulkStoreItemsRequest alloc] init:20 offset:0];
[request load:^(BVBulkStoresResponse * _Nonnull response) {
    
    // Get the BVStore(s) in the response.results array
    BVStore* store = response.results.firstObject;
    
} failure:^(NSArray * _Nonnull errors) {
    // handle failure appropriately
}];</code></pre>
	</div>
</div>
<br>

<h4>Display Stores By Id</h4>


<ul class="nav nav-tabs" role="tablist">
  <li role="presentation" class="active"><a href="#swift" aria-controls="swift" role="tab" data-toggle="tab">Swift</a></li>
  <li role="presentation"><a href="#objc" aria-controls="objc" role="tab" data-toggle="tab">Objective-C</a></li>
</ul>
<!-- Tab panes -->
<div class="tab-content code-switcher">
	<!-- swift -->
	<div role="tabpanel" class="tab-pane active" id="swift">
<pre><code class="swift">import BVSDK
...

 let req = BVBulkStoreItemsRequest(storeIds: ["1", "2"])
req.load({(response) in
    // success
    // get the BVStore object(s) in response.results
}){(error) in
    // error - tell the user something went wrong : (
}
</code></pre>
	</div>
	<!-- objective-c -->
	<div role="tabpanel" class="tab-pane" id="objc">
<pre><code class="objectivec">BVBulkStoreItemsRequest *request = [[BVBulkStoreItemsRequest alloc] initWithStoreIds:@[@"1", @"2"]];
[request load:^(BVBulkStoresResponse * _Nonnull response) {
    
    // Get the BVStore(s) in the response.results array
    BVStore* store = response.results.firstObject;
    
} failure:^(NSArray * _Nonnull errors) {
    // handle failure appropriately
}];
</code></pre>
	</div>
</div>
<br>

<br>

	</div>

	<div role="tabpanel" class="tab-pane" id="submitstorereview">

		<!-- Store Bulk Ratings -->
		<br>
<h4>Submitting a Review on a Store</h4>

<p>Use the <code>BVStoreReviewSubmission</code> class to set up your submission form values and submit a review on a single store.</p> 


<img src="ios-img/conversations_stores/stores_submit_review.png" style="height:410px; box-shadow: 0px 0px 8px #444;" class="center-block img-fluid" />

<ul class="nav nav-tabs" role="tablist">
  <li role="presentation" class="active"><a href="#swift" aria-controls="swift" role="tab" data-toggle="tab">Swift</a></li>
  <li role="presentation"><a href="#objc" aria-controls="objc" role="tab" data-toggle="tab">Objective-C</a></li>
</ul>
<!-- Tab panes -->
<div class="tab-content code-switcher">
    <!-- swift -->
    <div role="tabpanel" class="tab-pane active" id="swift">
<pre><code class="swift">let reviewSubmission = BVStoreReviewSubmission(reviewTitle: "Title",
                                                       reviewText: "review text goes here....",
                                                       rating: 5,
                                                       productId: storeId
        
reviewSubmission.action = BVSubmissionAction.Preview // Change to .Submit to write for real

let userId = "123abc"
let userNickName = "userNick"
let userEmail = "foo@bar.com"

reviewSubmission.user = userId
reviewSubmission.userNickname = userNickName
reviewSubmission.userEmail = userEmail
reviewSubmission.isRecommended = true
reviewSubmission.agreedToTermsAndConditions = true

reviewSubmission.addPhoto(photo, withPhotoCaption: nil)

reviewSubmission.submit({ (response) in
    
    // Successful submission!
    
}) { (errors) in
    
    // Error alert your user something went wrong and try again.
}

</code></pre>
    </div>
    <!-- objective-c -->
    <div role="tabpanel" class="tab-pane" id="objc">
<pre><code class="objectivec">BVStoreReviewSubmission *reviewSubmit = [[BVStoreReviewSubmission alloc] initWithReviewTitle:@"Review Title" reviewText:@"review text...." rating:5 storeId:@"yourStoreId"];
reviewSubmit.action = BVActionPreview; // change to submit for live submissions!

// Add your other required parameters here...

[reviewSubmit submit:^(BVReviewSubmissionResponse * _Nonnull response) {
    // Success!
} failure:^(NSArray<NSError *> * _Nonnull errors) {
    // Failure :(
}];</code></pre>
    </div>
</div>
<br>

<br>

	</div>
	
</div>
<br>



<div class="well well-sm">
	<h5>Author</h5>
	<p>Copyright 2017 Bazaarvoice, Inc. All rights reserved.</p>
	<h5>License</h5>
	<p>Use of the Bazaarvoice Mobile SDKs is contingent on your agreement and conformance with <a href="http://www.bazaarvoice.com/legal/api-terms-of-use.html">Bazaarvoice's API Terms of Use</a>. Additionally, you agree to store all data acquired by the SDK or Bazaarvoice's API only within the storage of the individual application instance using the SDK or API. You also agree to use the data acquired by the SDK or API only within the context of the same individual application instance and only for purposes consistent with that application's purpose. Except as otherwise noted, the Bazaarvoice Android and iOS SDKs are licensed under the <a href="http://www.apache.org/licenses/LICENSE-2.0.html">Apache License, Version 2.0</a>.</p>
</div>
<br>


              </div>
            </div>
          </div>
        </div>        
      </div>
    </div>
  </body>
